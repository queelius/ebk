{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"ebk - eBook Library Manager","text":"<p>ebk is a personal ebook library manager designed for readers who want full control over their digital book collection. Unlike cloud-based services, ebk stores everything locally in a SQLite database, giving you complete ownership of your library metadata, reading history, and organizational structure.</p>"},{"location":"#why-ebk","title":"Why ebk?","text":"<ul> <li>Local-first: Your library lives on your machine. No accounts, no cloud sync, no vendor lock-in.</li> <li>Programmable: A fluent Python API makes automation and scripting natural.</li> <li>Unix-inspired: An interactive shell with VFS navigation, piping, and familiar commands.</li> <li>Extensible: Views DSL, hierarchical tags, and export formats for any workflow.</li> </ul>"},{"location":"#core-features","title":"Core Features","text":""},{"location":"#library-management","title":"Library Management","text":"<ul> <li>SQLite + FTS5 Backend - Fast full-text search across titles, authors, descriptions, and extracted text</li> <li>Hash-based Deduplication - Same file = skipped; same book, different format = added</li> <li>Automatic Metadata Extraction - From EPUBs, PDFs, and Calibre libraries</li> <li>Cover Extraction - Automatic thumbnail generation</li> </ul>"},{"location":"#organization","title":"Organization","text":"<ul> <li>Hierarchical Tags - Nest tags like <code>Work/Projects/2024</code> for flexible organization</li> <li>Views - Named, composable library subsets with their own metadata overrides</li> <li>Personal Metadata - Ratings (0-5 stars), favorites, reading status, progress tracking</li> <li>Reading Queue - Prioritized list of books to read next</li> </ul>"},{"location":"#interactive-shell","title":"Interactive Shell","text":"<p>Navigate your library like a filesystem:</p> <pre><code>ebk shell ~/library\nebk:/$ cd books/\nebk:/books$ ls | grep Python | head 5\nebk:/books$ cd 42/.metadata\nebk:/books/42/.metadata$ cat\nebk:/$ find author:Knuth rating:&gt;=4\n</code></pre>"},{"location":"#import-export","title":"Import &amp; Export","text":"<p>Import from: - Individual ebook files (EPUB, PDF, MOBI, etc.) - Calibre libraries - OPDS catalog feeds - URLs (direct download) - ISBN lookup (Google Books, Open Library)</p> <p>Export to: - JSON, CSV (generic) - Goodreads CSV (for import into Goodreads) - Calibre CSV (for import into Calibre) - HTML (self-contained catalog with pagination) - OPDS (for e-reader apps)</p>"},{"location":"#book-operations","title":"Book Operations","text":"<ul> <li>Merge - Combine duplicate entries, preserving all metadata and files</li> <li>Bulk Edit - Update multiple books at once (language, tags, rating, etc.)</li> <li>Similar Books - Find related books using TF-IDF and metadata similarity</li> </ul>"},{"location":"#ai-powered-features-optional","title":"AI-Powered Features (Optional)","text":"<p>Connect to Ollama for LLM-powered metadata enrichment:</p> <ul> <li>Auto-generate tags and categories</li> <li>Enhance descriptions</li> <li>Assess reading difficulty</li> </ul>"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code>from pathlib import Path\nfrom ebk.library_db import Library\n\nlib = Library.open(Path(\"~/ebooks\"))\n\n# Fluent query builder\npython_books = (lib.query()\n    .filter_by_subject(\"Python\")\n    .filter_by_language(\"en\")\n    .filter_by_rating(4.0)\n    .order_by(\"title\")\n    .limit(20)\n    .all())\n\n# Full-text search\nresults = lib.search(\"machine learning algorithms\")\n\n# Personal metadata\nfrom ebk.services import PersonalMetadataService\npm = PersonalMetadataService(lib.session)\npm.set_rating(book_id=42, rating=5.0)\npm.set_reading_status(book_id=42, status=\"reading\")\n\nlib.close()\n</code></pre>"},{"location":"#cli-overview","title":"CLI Overview","text":"<pre><code># Library management\nebk init ~/library              # Create new library\nebk import add book.pdf         # Import single file\nebk import calibre ~/Calibre    # Import from Calibre\nebk search \"python programming\" # Full-text search\nebk list --author Knuth         # Filter and list\n\n# Personal tracking\nebk book rate 42 --rating 5\nebk book status 42 --set reading\nebk book favorite 42\n\n# Organization\nebk tag list\nebk view create favorites --favorite\nebk view show favorites\n\n# Export\nebk export goodreads ~/library ~/goodreads.csv\nebk export html ~/library ~/catalog.html\n\n# Interactive shell\nebk shell ~/library\n\n# Web interface\nebk serve ~/library\n</code></pre>"},{"location":"#getting-started","title":"Getting Started","text":"<ol> <li>Installation - Install ebk and optional features</li> <li>Quick Start - Create your first library</li> <li>Configuration - Customize defaults</li> </ol>"},{"location":"#documentation","title":"Documentation","text":"<ul> <li>CLI Reference - Complete command documentation</li> <li>Python API - Programmatic library access</li> <li>Search Syntax - Advanced query language</li> <li>Import/Export - Data interchange</li> <li>LLM Features - AI-powered enrichment</li> </ul>"},{"location":"#architecture","title":"Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     CLI (Typer + Rich)                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Interactive Shell (REPL)  \u2502  Web Server (FastAPI)      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                    Services Layer                       \u2502\n\u2502  ImportService \u2502 ExportService \u2502 PersonalMetadataService\u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                    Core Library                         \u2502\n\u2502  Library \u2502 QueryBuilder \u2502 ViewService \u2502 Similarity      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                SQLAlchemy ORM + SQLite + FTS5           \u2502\n\u2502  Book \u2502 Author \u2502 Subject \u2502 Tag \u2502 File \u2502 Cover \u2502 etc.   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"#support","title":"Support","text":"<ul> <li>GitHub Issues - Bug reports and feature requests</li> <li>GitHub Discussions - Questions and ideas</li> <li>Contact - Direct inquiries</li> </ul>"},{"location":"about/changelog/","title":"Changelog","text":"<p>Project changelog and release notes.</p>"},{"location":"about/changelog/#v031-2025-01-14","title":"v0.3.1 (2025-01-14)","text":""},{"location":"about/changelog/#new-features","title":"New Features","text":"<ul> <li>\ud83d\udd0d Advanced Search: Field-specific queries with boolean logic</li> <li>Field searches: <code>title:</code>, <code>author:</code>, <code>tag:</code>, <code>description:</code>, <code>text:</code></li> <li>Filter fields: <code>language:</code>, <code>format:</code>, <code>rating:</code>, <code>favorite:</code>, <code>status:</code></li> <li>Boolean operators: <code>AND</code> (implicit), <code>OR</code>, <code>NOT</code>/<code>-prefix</code></li> <li>Rating comparisons: <code>rating:&gt;=4</code>, <code>rating:3-5</code></li> <li>Phrase searches: <code>\"exact phrase\"</code></li> <li>\ud83d\udcc4 HTML Export Pagination: 50 books per page with navigation controls</li> <li>URL state tracking for bookmarkable pages</li> <li>Page numbers in URL query parameters</li> <li>Previous/Next buttons with page number links</li> <li>\ud83d\udccb Cover Copying: <code>--copy</code> flag now copies both files AND covers</li> </ul>"},{"location":"about/changelog/#improvements","title":"Improvements","text":"<ul> <li>Search parser with FTS5 column-specific queries (<code>title:term</code>)</li> <li>Author and subject filtering via SQL JOINs (not in FTS table)</li> <li>HTML export with URL-based state management (filters, search, page)</li> <li>Fixed <code>ExtractedText.content</code> attribute name (was incorrectly using <code>full_text</code>)</li> <li>Added missing <code>Library.add_subject()</code> method for metadata enrichment</li> </ul>"},{"location":"about/changelog/#bug-fixes","title":"Bug Fixes","text":"<ul> <li>Fixed <code>ebk enrich</code> command attribute error with extracted text</li> <li>Fixed HTML export <code>--copy</code> not copying cover images</li> <li>Fixed field searches not working (FTS5 column prefixes)</li> </ul>"},{"location":"about/changelog/#documentation","title":"Documentation","text":"<ul> <li>Comprehensive search guide with all syntax and examples</li> <li>Updated README with advanced search features</li> <li>Import/export guide with pagination documentation</li> <li>Clear notes about HTML export limitations (client-side filtering only)</li> </ul>"},{"location":"about/changelog/#v030-2025-01-xx","title":"v0.3.0 (2025-01-XX)","text":""},{"location":"about/changelog/#new-features_1","title":"New Features","text":"<ul> <li>\u2728 Configuration system at <code>~/.config/ebk/config.json</code></li> <li>\ud83e\udd16 LLM provider abstraction with Ollama support (local and remote)</li> <li>\ud83c\udff7\ufe0f AI-powered metadata enrichment (tags, categories, descriptions, difficulty assessment)</li> <li>\ud83c\udf10 Enhanced web server with config defaults and auto-open browser</li> <li>\ud83d\udcda Complete documentation overhaul with mkdocs</li> </ul>"},{"location":"about/changelog/#configuration-system","title":"Configuration System","text":"<ul> <li>Centralized configuration management with <code>ebk config</code> command</li> <li>Four configuration sections: <code>llm</code>, <code>server</code>, <code>cli</code>, <code>library</code></li> <li>Support for default library path</li> <li>Server host, port, and auto-open browser settings</li> <li>CLI defaults for verbosity and color output</li> </ul>"},{"location":"about/changelog/#llm-integration","title":"LLM Integration","text":"<ul> <li>Abstract <code>BaseLLMProvider</code> interface in <code>ebk/ai/llm_providers/</code></li> <li><code>OllamaProvider</code> with local and remote support</li> <li><code>MetadataEnrichmentService</code> for intelligent metadata generation</li> <li><code>ebk enrich</code> command with selective enrichment options</li> <li>Support for multiple models and temperature control</li> </ul>"},{"location":"about/changelog/#server-updates","title":"Server Updates","text":"<ul> <li><code>ebk serve</code> now uses config defaults for library path, host, and port</li> <li>Optional library path argument (uses config if not specified)</li> <li>Auto-open browser feature</li> <li>REST API improvements</li> </ul>"},{"location":"about/changelog/#documentation_1","title":"Documentation","text":"<ul> <li>New user guides: Configuration, LLM Features, Web Server, CLI Reference</li> <li>Updated README with quickstart and modern examples</li> <li>Deployed to GitHub Pages</li> </ul>"},{"location":"about/changelog/#breaking-changes","title":"Breaking Changes","text":"<ul> <li><code>ebk serve</code> library path is now optional (uses config default)</li> <li>Some CLI options renamed for consistency (e.g., <code>--llm-*</code> prefix)</li> </ul>"},{"location":"about/changelog/#earlier-versions","title":"Earlier Versions","text":"<p>See GitHub Releases for information about earlier versions.</p>"},{"location":"about/license/","title":"License","text":"<p>ebk is distributed under the MIT License.</p> <p>See LICENSE file for details.</p>"},{"location":"advanced/batch-operations/","title":"Batch Operations","text":"<p>Efficiently processing multiple books.</p>"},{"location":"advanced/batch-operations/#see-also","title":"See Also","text":"<ul> <li>LLM Features - Batch enrichment</li> </ul>"},{"location":"advanced/hugo-export/","title":"Hugo Export with Jinja Templates","text":"<p>The ebk Hugo export now supports flexible organization and templating through Jinja2.</p>"},{"location":"advanced/hugo-export/#basic-usage","title":"Basic Usage","text":"<pre><code># Legacy export (flat structure)\nebk export hugo /path/to/library /path/to/hugo-site\n\n# New Jinja-based export with organization options\nebk export hugo /path/to/library /path/to/hugo-site --jinja --organize-by year\n</code></pre>"},{"location":"advanced/hugo-export/#organization-options","title":"Organization Options","text":"<p>With the <code>--jinja</code> flag, you can organize your library in different ways:</p>"},{"location":"advanced/hugo-export/#flat-default","title":"Flat (default)","text":"<p>All books in one directory: <pre><code>content/library/\n\u251c\u2500\u2500 _index.md\n\u251c\u2500\u2500 book-1-abc12345.md\n\u251c\u2500\u2500 book-2-def67890.md\n\u2514\u2500\u2500 ...\n</code></pre></p>"},{"location":"advanced/hugo-export/#by-year","title":"By Year","text":"<p><pre><code>ebk export hugo /path/to/library /path/to/hugo-site --jinja --organize-by year\n</code></pre> <pre><code>content/library/\n\u251c\u2500\u2500 _index.md\n\u251c\u2500\u2500 2023/\n\u2502   \u251c\u2500\u2500 _index.md\n\u2502   \u2514\u2500\u2500 book-1-abc12345.md\n\u251c\u2500\u2500 2024/\n\u2502   \u251c\u2500\u2500 _index.md\n\u2502   \u2514\u2500\u2500 book-2-def67890.md\n\u2514\u2500\u2500 unknown-year/\n    \u2514\u2500\u2500 ...\n</code></pre></p>"},{"location":"advanced/hugo-export/#by-language","title":"By Language","text":"<p><pre><code>ebk export hugo /path/to/library /path/to/hugo-site --jinja --organize-by language\n</code></pre> <pre><code>content/library/\n\u251c\u2500\u2500 _index.md\n\u251c\u2500\u2500 en/\n\u2502   \u251c\u2500\u2500 _index.md\n\u2502   \u2514\u2500\u2500 books...\n\u251c\u2500\u2500 es/\n\u2502   \u251c\u2500\u2500 _index.md\n\u2502   \u2514\u2500\u2500 books...\n\u2514\u2500\u2500 ...\n</code></pre></p>"},{"location":"advanced/hugo-export/#by-subject","title":"By Subject","text":"<p><pre><code>ebk export hugo /path/to/library /path/to/hugo-site --jinja --organize-by subject\n</code></pre> Books appear in multiple subject directories if they have multiple subjects: <pre><code>content/library/\n\u251c\u2500\u2500 _index.md\n\u251c\u2500\u2500 fiction/\n\u2502   \u251c\u2500\u2500 _index.md\n\u2502   \u2514\u2500\u2500 books...\n\u251c\u2500\u2500 science/\n\u2502   \u251c\u2500\u2500 _index.md\n\u2502   \u2514\u2500\u2500 books...\n\u2514\u2500\u2500 ...\n</code></pre></p>"},{"location":"advanced/hugo-export/#by-creator","title":"By Creator","text":"<p><pre><code>ebk export hugo /path/to/library /path/to/hugo-site --jinja --organize-by creator\n</code></pre> Books appear under each of their creators: <pre><code>content/library/\n\u251c\u2500\u2500 _index.md\n\u251c\u2500\u2500 jane-doe/\n\u2502   \u251c\u2500\u2500 _index.md\n\u2502   \u2514\u2500\u2500 books...\n\u251c\u2500\u2500 john-smith/\n\u2502   \u251c\u2500\u2500 _index.md\n\u2502   \u2514\u2500\u2500 books...\n\u2514\u2500\u2500 ...\n</code></pre></p>"},{"location":"advanced/hugo-export/#custom-templates","title":"Custom Templates","text":"<p>You can provide your own Jinja2 templates:</p> <pre><code>ebk export hugo /path/to/library /path/to/hugo-site --jinja \\\n    --template-dir /path/to/custom/templates\n</code></pre> <p>Your template directory should follow this structure: <pre><code>templates/\n\u2514\u2500\u2500 hugo/\n    \u251c\u2500\u2500 book.md      # Individual book page\n    \u251c\u2500\u2500 index.md     # Category index pages\n    \u2514\u2500\u2500 library.md   # Main library index\n</code></pre></p>"},{"location":"advanced/hugo-export/#template-variables","title":"Template Variables","text":""},{"location":"advanced/hugo-export/#bookmd","title":"book.md","text":"<ul> <li><code>book</code>: Dictionary with all metadata fields</li> <li><code>ebook_urls</code>: List of download URLs</li> <li><code>cover_url</code>: Cover image URL</li> </ul>"},{"location":"advanced/hugo-export/#indexmd","title":"index.md","text":"<ul> <li><code>title</code>: Section title</li> <li><code>organize_by</code>: Organization method</li> <li><code>group_key</code>: Current group identifier</li> <li><code>books</code>: List of books in this section</li> <li><code>book_count</code>: Number of books</li> </ul>"},{"location":"advanced/hugo-export/#librarymd","title":"library.md","text":"<ul> <li><code>title</code>: Library title</li> <li><code>books</code>: All books in the library</li> <li><code>stats</code>: Library statistics dictionary</li> </ul>"},{"location":"advanced/hugo-export/#hugo-configuration","title":"Hugo Configuration","text":"<p>To fully utilize the exported library, configure your Hugo site:</p>"},{"location":"advanced/hugo-export/#1-add-library-section","title":"1. Add Library Section","text":"<p>In <code>config.toml</code>: <pre><code>[[menu.main]]\n  name = \"Library\"\n  url = \"/library/\"\n  weight = 10\n</code></pre></p>"},{"location":"advanced/hugo-export/#2-create-custom-layouts","title":"2. Create Custom Layouts","text":"<p>Create <code>layouts/library/single.html</code> for book pages: <pre><code>{{ define \"main\" }}\n&lt;article class=\"book-page\"&gt;\n  &lt;h1&gt;{{ .Title }}&lt;/h1&gt;\n\n  {{ with .Params.cover_image }}\n    &lt;img src=\"{{ . }}\" alt=\"Book cover\" class=\"book-cover\"&gt;\n  {{ end }}\n\n  &lt;div class=\"book-meta\"&gt;\n    {{ with .Params.creators_display }}\n      &lt;p&gt;By {{ delimit . \", \" }}&lt;/p&gt;\n    {{ end }}\n\n    {{ with .Params.description }}\n      &lt;div class=\"description\"&gt;{{ . | markdownify }}&lt;/div&gt;\n    {{ end }}\n  &lt;/div&gt;\n\n  {{ with .Params.ebook_files }}\n    &lt;div class=\"downloads\"&gt;\n      &lt;h3&gt;Download&lt;/h3&gt;\n      {{ range . }}\n        &lt;a href=\"{{ . }}\" class=\"download-btn\"&gt;Download&lt;/a&gt;\n      {{ end }}\n    &lt;/div&gt;\n  {{ end }}\n&lt;/article&gt;\n{{ end }}\n</code></pre></p>"},{"location":"advanced/hugo-export/#3-style-your-library","title":"3. Style Your Library","text":"<p>Add CSS for the book grid and cards: <pre><code>.book-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 2rem;\n}\n\n.book-card {\n  border: 1px solid #ddd;\n  padding: 1rem;\n  transition: transform 0.2s;\n}\n\n.book-card:hover {\n  transform: translateY(-5px);\n}\n</code></pre></p>"},{"location":"advanced/hugo-export/#advanced-features","title":"Advanced Features","text":""},{"location":"advanced/hugo-export/#filtering-and-search","title":"Filtering and Search","text":"<p>The exported structure supports Hugo's built-in taxonomy system. You can filter by: - Tags (from subjects) - Authors (from creators) - Years - Languages</p>"},{"location":"advanced/hugo-export/#multiple-views","title":"Multiple Views","text":"<p>Since books can appear in multiple categories (e.g., by subject AND by author), users can browse your library from different perspectives.</p>"},{"location":"advanced/hugo-export/#static-but-dynamic","title":"Static but Dynamic","text":"<p>While Hugo generates static files, the organization allows for client-side filtering and search using JavaScript if desired.</p>"},{"location":"advanced/hugo-export/#example-workflow","title":"Example Workflow","text":"<ol> <li> <p>Import your Calibre library:    <pre><code>ebk import-calibre ~/Calibre ~/my-ebk-library\n</code></pre></p> </li> <li> <p>Export to Hugo with year organization:    <pre><code>ebk export hugo ~/my-ebk-library ~/my-hugo-site --jinja --organize-by year\n</code></pre></p> </li> <li> <p>Build and serve your Hugo site:    <pre><code>cd ~/my-hugo-site\nhugo serve\n</code></pre></p> </li> <li> <p>Visit <code>http://localhost:1313/library/</code> to browse your collection!</p> </li> </ol>"},{"location":"advanced/hugo-export/#tips","title":"Tips","text":"<ul> <li>Use <code>--organize-by subject</code> for topic-based browsing</li> <li>Use <code>--organize-by creator</code> for author-centric libraries</li> <li>Combine with Hugo's search functionality for full-text search</li> <li>The unique_id in URLs ensures no conflicts even with duplicate titles</li> <li>Consider using Hugo's image processing for cover thumbnails</li> </ul>"},{"location":"advanced/recommendations/","title":"Recommendations","text":"<p>Finding similar books and getting recommendations.</p> <p>Coming Soon</p> <p>This feature is planned for a future release. It will leverage the knowledge graph and semantic search capabilities to provide intelligent book recommendations.</p>"},{"location":"advanced/recommendations/#planned-features","title":"Planned Features","text":"<ul> <li>Content-based recommendations - Find similar books based on:</li> <li>Shared subjects and tags</li> <li>Similar descriptions and keywords</li> <li>Author connections</li> <li> <p>Reading patterns</p> </li> <li> <p>Semantic similarity - Use embeddings to find books with:</p> </li> <li>Similar themes and concepts</li> <li>Related topics</li> <li> <p>Comparable writing style</p> </li> <li> <p>Knowledge graph traversal - Discover books through:</p> </li> <li>Citation networks</li> <li>Subject hierarchies</li> <li>Concept relationships</li> </ul>"},{"location":"advanced/recommendations/#see-also","title":"See Also","text":"<ul> <li>CLI Reference - Command reference</li> <li>LLM Features - AI-powered capabilities</li> </ul>"},{"location":"advanced/symlink-dag/","title":"Symlink DAG Export Documentation","text":"<p>The symlink DAG (Directed Acyclic Graph) export feature creates a navigable directory structure that represents your library's tag hierarchy using symbolic links. This allows you to browse your ebook collection through tag categories using any file explorer or command line interface.</p>"},{"location":"advanced/symlink-dag/#overview","title":"Overview","text":"<p>The symlink DAG export transforms your flat library structure into a hierarchical directory tree where: - Each tag becomes a directory - Hierarchical tags (e.g., \"Programming/Python/Web\") create nested directories - Books appear in all relevant tag directories via symbolic links - The actual files are stored in a central <code>_books</code> directory</p>"},{"location":"advanced/symlink-dag/#usage","title":"Usage","text":""},{"location":"advanced/symlink-dag/#command-line","title":"Command Line","text":"<pre><code># Basic export\nebk export-dag /path/to/library /path/to/output\n\n# Use a different field for categorization (default: subjects)\nebk export-dag /path/to/library /path/to/output --tag-field creators\n\n# Skip copying actual files (only create symlinks to metadata)\nebk export-dag /path/to/library /path/to/output --no-files\n\n# Skip HTML index generation\nebk export-dag /path/to/library /path/to/output --no-index\n</code></pre>"},{"location":"advanced/symlink-dag/#python-api","title":"Python API","text":"<pre><code>from ebk import Library\n\nlib = Library.open(\"/path/to/library\")\n\n# Basic export\nlib.export_to_symlink_dag(\"/path/to/output\")\n\n# Custom options\nlib.export_to_symlink_dag(\n    \"/path/to/output\",\n    tag_field=\"creators\",  # Organize by authors instead of subjects\n    include_files=False,   # Don't copy ebook files\n    create_index=True      # Generate HTML indexes for web browsing\n)\n\n# Chain with other operations\n(lib.filter(lambda e: e.get(\"language\") == \"en\")\n    .export_to_symlink_dag(\"/english-books-dag\"))\n</code></pre>"},{"location":"advanced/symlink-dag/#directory-structure","title":"Directory Structure","text":""},{"location":"advanced/symlink-dag/#example-library","title":"Example Library","text":"<p>Given a library with these books: 1. \"Learn Python\" - Tags: [\"Programming\", \"Programming/Python\", \"Education\"] 2. \"Django Web Development\" - Tags: [\"Programming/Python/Web\", \"Web Development\"] 3. \"Machine Learning Basics\" - Tags: [\"Programming/Python\", \"AI/Machine Learning\"]</p>"},{"location":"advanced/symlink-dag/#generated-structure","title":"Generated Structure","text":"<pre><code>output-directory/\n\u251c\u2500\u2500 README.md                      # Explains the structure\n\u251c\u2500\u2500 _books/                        # Actual files stored here\n\u2502   \u251c\u2500\u2500 book_id_1/\n\u2502   \u2502   \u251c\u2500\u2500 metadata.json\n\u2502   \u2502   \u251c\u2500\u2500 learn_python.pdf\n\u2502   \u2502   \u2514\u2500\u2500 cover.jpg\n\u2502   \u251c\u2500\u2500 book_id_2/\n\u2502   \u2502   \u251c\u2500\u2500 metadata.json\n\u2502   \u2502   \u2514\u2500\u2500 django_web_dev.epub\n\u2502   \u2514\u2500\u2500 book_id_3/\n\u2502       \u251c\u2500\u2500 metadata.json\n\u2502       \u2514\u2500\u2500 ml_basics.pdf\n\u251c\u2500\u2500 Programming/\n\u2502   \u251c\u2500\u2500 index.html                 # Web index for this level\n\u2502   \u251c\u2500\u2500 Learn Python \u2192 ../../_books/book_id_1\n\u2502   \u251c\u2500\u2500 Python/\n\u2502   \u2502   \u251c\u2500\u2500 index.html\n\u2502   \u2502   \u251c\u2500\u2500 Learn Python \u2192 ../../../_books/book_id_1\n\u2502   \u2502   \u251c\u2500\u2500 Machine Learning Basics \u2192 ../../../_books/book_id_3\n\u2502   \u2502   \u2514\u2500\u2500 Web/\n\u2502   \u2502       \u251c\u2500\u2500 index.html\n\u2502   \u2502       \u2514\u2500\u2500 Django Web Development \u2192 ../../../../_books/book_id_2\n\u251c\u2500\u2500 Education/\n\u2502   \u251c\u2500\u2500 index.html\n\u2502   \u2514\u2500\u2500 Learn Python \u2192 ../../_books/book_id_1\n\u251c\u2500\u2500 Web Development/\n\u2502   \u251c\u2500\u2500 index.html\n\u2502   \u2514\u2500\u2500 Django Web Development \u2192 ../../_books/book_id_2\n\u2514\u2500\u2500 AI/\n    \u251c\u2500\u2500 index.html\n    \u2514\u2500\u2500 Machine Learning/\n        \u251c\u2500\u2500 index.html\n        \u2514\u2500\u2500 Machine Learning Basics \u2192 ../../../_books/book_id_3\n</code></pre>"},{"location":"advanced/symlink-dag/#features","title":"Features","text":""},{"location":"advanced/symlink-dag/#hierarchical-tag-support","title":"Hierarchical Tag Support","text":"<p>Tags containing \"/\" are treated as hierarchical: - \"Programming/Python/Web\" creates three nested levels - Books are accessible at each level of the hierarchy - Allows natural drill-down navigation</p>"},{"location":"advanced/symlink-dag/#multiple-tag-appearances","title":"Multiple Tag Appearances","text":"<p>Books appear in multiple locations: - A book tagged with [\"Programming\", \"Education\"] appears in both directories - Symlinks ensure no file duplication - Changes to files are reflected everywhere</p>"},{"location":"advanced/symlink-dag/#web-navigation","title":"Web Navigation","text":"<p>When <code>create_index</code> is enabled: - Each directory contains an <code>index.html</code> file - Browse the structure in a web browser - Navigate between parent/child categories - Direct links to open book directories</p>"},{"location":"advanced/symlink-dag/#readable-names","title":"Readable Names","text":"<p>Symlinks use human-readable names: - Format: \"Title - First Author\" - Sanitized for filesystem compatibility - Actual files stored by ID in <code>_books</code></p>"},{"location":"advanced/symlink-dag/#navigation-methods","title":"Navigation Methods","text":""},{"location":"advanced/symlink-dag/#file-explorer","title":"File Explorer","text":"<ul> <li>Open the output directory in Finder, Windows Explorer, or any file manager</li> <li>Navigate through categories like regular folders</li> <li>Open books by following symlinks</li> </ul>"},{"location":"advanced/symlink-dag/#command-line_1","title":"Command Line","text":"<pre><code># Navigate the structure\ncd /path/to/output\ncd Programming/Python\nls\n\n# Find all Python books\nfind . -name \"*.pdf\" -path \"*/Python/*\"\n</code></pre>"},{"location":"advanced/symlink-dag/#web-browser","title":"Web Browser","text":"<pre><code># Open in default browser\nopen /path/to/output/index.html  # macOS\nxdg-open /path/to/output/index.html  # Linux\nstart /path/to/output/index.html  # Windows\n\n# Or open file:// URL directly\n</code></pre>"},{"location":"advanced/symlink-dag/#platform-considerations","title":"Platform Considerations","text":""},{"location":"advanced/symlink-dag/#linuxmacos","title":"Linux/macOS","text":"<ul> <li>Symlinks work natively</li> <li>No special permissions required</li> <li>Full support for all features</li> </ul>"},{"location":"advanced/symlink-dag/#windows","title":"Windows","text":"<ul> <li>Requires administrator privileges to create symlinks</li> <li>Or enable Developer Mode (Windows 10+)</li> <li>Alternative: Use WSL (Windows Subsystem for Linux)</li> </ul>"},{"location":"development/PLUGIN_ARCHITECTURE/","title":"EBK Plugin Architecture","text":""},{"location":"development/PLUGIN_ARCHITECTURE/#overview","title":"Overview","text":"<p>The plugin architecture allows EBK to be extended without modifying core code. Plugins can add new functionality, modify behavior, and integrate with external services.</p>"},{"location":"development/PLUGIN_ARCHITECTURE/#plugin-types","title":"Plugin Types","text":""},{"location":"development/PLUGIN_ARCHITECTURE/#1-metadataextractor","title":"1. MetadataExtractor","text":"<p>Extract or enhance metadata from various sources.</p> <pre><code>from abc import ABC, abstractmethod\nfrom typing import Dict, Any, Optional\nfrom ebk.plugins.base import Plugin\n\nclass MetadataExtractor(Plugin, ABC):\n    \"\"\"Base class for metadata extraction plugins.\"\"\"\n\n    @abstractmethod\n    async def extract(self, \n                     file_path: Optional[str] = None,\n                     url: Optional[str] = None,\n                     isbn: Optional[str] = None,\n                     content: Optional[bytes] = None) -&gt; Dict[str, Any]:\n        \"\"\"\n        Extract metadata from various sources.\n\n        Returns:\n            Dictionary with metadata fields like:\n            - title, creators, subjects, description\n            - publisher, date, language\n            - isbn, doi, other identifiers\n            - cover_url, thumbnail_url\n        \"\"\"\n        pass\n\n    @abstractmethod\n    def supported_formats(self) -&gt; List[str]:\n        \"\"\"Return list of supported file formats.\"\"\"\n        pass\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#2-tagsuggester","title":"2. TagSuggester","text":"<p>Generate tags based on content analysis.</p> <pre><code>class TagSuggester(Plugin, ABC):\n    \"\"\"Base class for tag suggestion plugins.\"\"\"\n\n    @abstractmethod\n    async def suggest_tags(self, \n                          entry: Entry,\n                          max_tags: int = 10,\n                          confidence_threshold: float = 0.5) -&gt; List[TagSuggestion]:\n        \"\"\"\n        Suggest tags for an entry.\n\n        Returns:\n            List of TagSuggestion objects with tag and confidence score.\n        \"\"\"\n        pass\n\n    @abstractmethod\n    def requires_content(self) -&gt; bool:\n        \"\"\"Whether this suggester needs file content.\"\"\"\n        pass\n\nclass TagSuggestion:\n    tag: str\n    confidence: float\n    source: str  # Which plugin suggested it\n    reason: Optional[str]  # Why this tag was suggested\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#3-contentanalyzer","title":"3. ContentAnalyzer","text":"<p>Analyze content for various metrics.</p> <pre><code>class ContentAnalyzer(Plugin, ABC):\n    \"\"\"Base class for content analysis plugins.\"\"\"\n\n    @abstractmethod\n    async def analyze(self, entry: Entry) -&gt; ContentAnalysis:\n        \"\"\"Analyze entry content.\"\"\"\n        pass\n\nclass ContentAnalysis:\n    reading_time: Optional[int]  # minutes\n    difficulty_level: Optional[str]  # easy/medium/hard\n    word_count: Optional[int]\n    page_count: Optional[int]\n    language: Optional[str]\n    summary: Optional[str]\n    key_topics: List[str]\n    sentiment: Optional[float]  # -1 to 1\n    quality_score: Optional[float]  # 0 to 1\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#4-deduplicator","title":"4. Deduplicator","text":"<p>Strategies for finding and handling duplicates.</p> <pre><code>class Deduplicator(Plugin, ABC):\n    \"\"\"Base class for deduplication plugins.\"\"\"\n\n    @abstractmethod\n    def find_duplicates(self, \n                       entries: List[Entry],\n                       threshold: float = 0.9) -&gt; List[DuplicateGroup]:\n        \"\"\"Find duplicate entries.\"\"\"\n        pass\n\n    @abstractmethod\n    def merge_duplicates(self, \n                        duplicates: DuplicateGroup,\n                        strategy: str = \"newest\") -&gt; Entry:\n        \"\"\"Merge duplicate entries into one.\"\"\"\n        pass\n\nclass DuplicateGroup:\n    entries: List[Entry]\n    similarity_score: float\n    match_reason: str  # \"isbn\", \"title_author\", \"content_hash\", etc.\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#5-validator","title":"5. Validator","text":"<p>Validate entries for correctness and completeness.</p> <pre><code>class Validator(Plugin, ABC):\n    \"\"\"Base class for validation plugins.\"\"\"\n\n    @abstractmethod\n    def validate(self, entry: Entry) -&gt; ValidationResult:\n        \"\"\"Validate an entry.\"\"\"\n        pass\n\nclass ValidationResult:\n    is_valid: bool\n    errors: List[ValidationError]\n    warnings: List[ValidationWarning]\n    completeness_score: float  # 0 to 1\n\nclass ValidationError:\n    field: str\n    message: str\n    severity: str  # \"error\", \"warning\", \"info\"\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#6-exporter","title":"6. Exporter","text":"<p>Export to various formats.</p> <pre><code>class Exporter(Plugin, ABC):\n    \"\"\"Base class for export plugins.\"\"\"\n\n    @abstractmethod\n    async def export(self,\n                    entries: List[Entry],\n                    output_path: str,\n                    options: Dict[str, Any]) -&gt; ExportResult:\n        \"\"\"Export entries to a specific format.\"\"\"\n        pass\n\n    @abstractmethod\n    def supported_formats(self) -&gt; List[str]:\n        \"\"\"Return list of supported export formats.\"\"\"\n        pass\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#plugin-implementation-examples","title":"Plugin Implementation Examples","text":""},{"location":"development/PLUGIN_ARCHITECTURE/#example-1-google-books-plugin","title":"Example 1: Google Books Plugin","text":"<pre><code># ebk/plugins/google_books.py\nimport aiohttp\nfrom ebk.plugins.base import MetadataExtractor\n\nclass GoogleBooksExtractor(MetadataExtractor):\n    \"\"\"Extract metadata from Google Books API.\"\"\"\n\n    def __init__(self, api_key: Optional[str] = None):\n        self.api_key = api_key or os.environ.get(\"GOOGLE_BOOKS_API_KEY\")\n        self.base_url = \"https://www.googleapis.com/books/v1/volumes\"\n\n    async def extract(self, isbn: Optional[str] = None, **kwargs) -&gt; Dict[str, Any]:\n        if not isbn:\n            return {}\n\n        async with aiohttp.ClientSession() as session:\n            params = {\"q\": f\"isbn:{isbn}\"}\n            if self.api_key:\n                params[\"key\"] = self.api_key\n\n            async with session.get(self.base_url, params=params) as resp:\n                data = await resp.json()\n\n        if data.get(\"totalItems\", 0) == 0:\n            return {}\n\n        item = data[\"items\"][0][\"volumeInfo\"]\n\n        return {\n            \"title\": item.get(\"title\"),\n            \"creators\": item.get(\"authors\", []),\n            \"publisher\": item.get(\"publisher\"),\n            \"date\": item.get(\"publishedDate\"),\n            \"description\": item.get(\"description\"),\n            \"subjects\": item.get(\"categories\", []),\n            \"language\": item.get(\"language\"),\n            \"page_count\": item.get(\"pageCount\"),\n            \"cover_url\": item.get(\"imageLinks\", {}).get(\"thumbnail\")\n        }\n\n    def supported_formats(self) -&gt; List[str]:\n        return []  # Works with ISBN, not files\n\n    @property\n    def name(self) -&gt; str:\n        return \"google_books\"\n\n    @property\n    def version(self) -&gt; str:\n        return \"1.0.0\"\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#example-2-openai-tagger-plugin","title":"Example 2: OpenAI Tagger Plugin","text":"<pre><code># ebk/plugins/openai_tagger.py\nimport openai\nfrom ebk.plugins.base import TagSuggester\n\nclass OpenAITagger(TagSuggester):\n    \"\"\"Generate tags using OpenAI GPT.\"\"\"\n\n    def __init__(self, api_key: str, model: str = \"gpt-3.5-turbo\"):\n        self.client = openai.Client(api_key=api_key)\n        self.model = model\n\n    async def suggest_tags(self, \n                          entry: Entry,\n                          max_tags: int = 10,\n                          confidence_threshold: float = 0.5) -&gt; List[TagSuggestion]:\n\n        prompt = f\"\"\"\n        Suggest up to {max_tags} relevant tags for this book:\n        Title: {entry.title}\n        Authors: {', '.join(entry.creators)}\n        Description: {entry.description[:500] if entry.description else 'N/A'}\n        Current subjects: {', '.join(entry.subjects)}\n\n        Return tags as a JSON list with confidence scores.\n        \"\"\"\n\n        response = await self.client.chat.completions.create(\n            model=self.model,\n            messages=[{\"role\": \"user\", \"content\": prompt}],\n            response_format={\"type\": \"json_object\"}\n        )\n\n        suggestions = []\n        for tag_data in response.choices[0].message.content:\n            if tag_data[\"confidence\"] &gt;= confidence_threshold:\n                suggestions.append(TagSuggestion(\n                    tag=tag_data[\"tag\"],\n                    confidence=tag_data[\"confidence\"],\n                    source=\"openai\",\n                    reason=tag_data.get(\"reason\")\n                ))\n\n        return suggestions\n\n    def requires_content(self) -&gt; bool:\n        return False  # Can work with just metadata\n\n    @property\n    def name(self) -&gt; str:\n        return \"openai_tagger\"\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#plugin-discovery-and-registration","title":"Plugin Discovery and Registration","text":""},{"location":"development/PLUGIN_ARCHITECTURE/#automatic-discovery","title":"Automatic Discovery","text":"<pre><code># ebk/plugins/discovery.py\nimport importlib\nimport pkgutil\nfrom typing import Dict, List, Type\n\nclass PluginRegistry:\n    def __init__(self):\n        self._plugins: Dict[str, List[Plugin]] = {}\n        self._hooks: Dict[str, List[Callable]] = {}\n\n    def discover_plugins(self):\n        \"\"\"Discover plugins from installed packages.\"\"\"\n        # 1. Check entry points\n        self._discover_entry_points()\n\n        # 2. Check plugins directory\n        self._discover_local_plugins()\n\n        # 3. Check environment variable\n        self._discover_env_plugins()\n\n    def _discover_entry_points(self):\n        \"\"\"Discover plugins via setuptools entry points.\"\"\"\n        import importlib.metadata\n\n        for ep in importlib.metadata.entry_points().get(\"ebk.plugins\", []):\n            try:\n                plugin_class = ep.load()\n                self.register(plugin_class())\n            except Exception as e:\n                logger.error(f\"Failed to load plugin {ep.name}: {e}\")\n\n    def _discover_local_plugins(self):\n        \"\"\"Discover plugins in the plugins directory.\"\"\"\n        plugins_dir = Path(__file__).parent\n\n        for module_info in pkgutil.iter_modules([str(plugins_dir)]):\n            if module_info.name.startswith(\"_\"):\n                continue\n\n            try:\n                module = importlib.import_module(f\"ebk.plugins.{module_info.name}\")\n\n                for name, obj in inspect.getmembers(module):\n                    if inspect.isclass(obj) and issubclass(obj, Plugin):\n                        self.register(obj())\n            except Exception as e:\n                logger.error(f\"Failed to load plugin module {module_info.name}: {e}\")\n\n    def register(self, plugin: Plugin):\n        \"\"\"Register a plugin instance.\"\"\"\n        plugin_type = type(plugin).__bases__[0].__name__\n\n        if plugin_type not in self._plugins:\n            self._plugins[plugin_type] = []\n\n        self._plugins[plugin_type].append(plugin)\n        logger.info(f\"Registered plugin: {plugin.name} ({plugin_type})\")\n\n    def get_plugins(self, plugin_type: str) -&gt; List[Plugin]:\n        \"\"\"Get all plugins of a specific type.\"\"\"\n        return self._plugins.get(plugin_type, [])\n\n    def get_plugin(self, name: str) -&gt; Optional[Plugin]:\n        \"\"\"Get a specific plugin by name.\"\"\"\n        for plugins in self._plugins.values():\n            for plugin in plugins:\n                if plugin.name == name:\n                    return plugin\n        return None\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#manual-registration","title":"Manual Registration","text":"<pre><code>from ebk import plugin_registry\nfrom my_plugins import CustomTagger\n\n# Register a plugin instance\nregistry.register(CustomTagger())\n\n# Or via decorator\n@register_plugin\nclass MyExtractor(MetadataExtractor):\n    pass\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#hook-system","title":"Hook System","text":""},{"location":"development/PLUGIN_ARCHITECTURE/#defining-hooks","title":"Defining Hooks","text":"<pre><code># ebk/hooks.py\nfrom typing import Callable, Any, List\n\nclass HookRegistry:\n    def __init__(self):\n        self._hooks: Dict[str, List[Callable]] = {}\n\n    def register_hook(self, event: str, callback: Callable):\n        \"\"\"Register a hook callback.\"\"\"\n        if event not in self._hooks:\n            self._hooks[event] = []\n        self._hooks[event].append(callback)\n\n    def trigger(self, event: str, *args, **kwargs) -&gt; List[Any]:\n        \"\"\"Trigger all callbacks for an event.\"\"\"\n        results = []\n        for callback in self._hooks.get(event, []):\n            try:\n                result = callback(*args, **kwargs)\n                if result is not None:\n                    results.append(result)\n            except Exception as e:\n                logger.error(f\"Hook {callback.__name__} failed: {e}\")\n        return results\n\n# Global hook registry\nhooks = HookRegistry()\n\n# Decorator for registering hooks\ndef hook(event: str):\n    def decorator(func: Callable):\n        hooks.register_hook(event, func)\n        return func\n    return decorator\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#using-hooks","title":"Using Hooks","text":"<pre><code># In plugins or user code\n@hook(\"entry.added\")\ndef on_entry_added(entry: Entry, library: Library):\n    \"\"\"Auto-tag new entries.\"\"\"\n    if not entry.tags:\n        tags = suggest_tags(entry)\n        entry.add_tags(tags)\n\n@hook(\"before_export\")\ndef validate_before_export(entries: List[Entry], format: str):\n    \"\"\"Validate entries before export.\"\"\"\n    for entry in entries:\n        if not entry.is_valid():\n            raise ValidationError(f\"Invalid entry: {entry.unique_id}\")\n\n# In core code\ndef add_entry(self, entry: Entry):\n    # ... add logic ...\n    hooks.trigger(\"entry.added\", entry, self)\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#plugin-configuration","title":"Plugin Configuration","text":""},{"location":"development/PLUGIN_ARCHITECTURE/#configuration-schema","title":"Configuration Schema","text":"<pre><code># ebk/plugins/config.py\nfrom pydantic import BaseModel\n\nclass PluginConfig(BaseModel):\n    \"\"\"Base configuration for plugins.\"\"\"\n    enabled: bool = True\n    priority: int = 0  # Higher priority plugins run first\n\nclass GoogleBooksConfig(PluginConfig):\n    api_key: Optional[str] = None\n    rate_limit: int = 100  # requests per minute\n    cache_ttl: int = 3600  # seconds\n\nclass OpenAIConfig(PluginConfig):\n    api_key: str\n    model: str = \"gpt-3.5-turbo\"\n    temperature: float = 0.7\n    max_tokens: int = 150\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#loading-configuration","title":"Loading Configuration","text":"<pre><code># ebk/config.py\nimport yaml\nfrom pathlib import Path\n\ndef load_plugin_config() -&gt; Dict[str, PluginConfig]:\n    \"\"\"Load plugin configuration from file.\"\"\"\n    config_paths = [\n        Path.home() / \".config\" / \"ebk\" / \"plugins.yaml\",\n        Path.home() / \".ebk\" / \"plugins.yaml\",\n        Path(\"./ebk_plugins.yaml\")\n    ]\n\n    for path in config_paths:\n        if path.exists():\n            with open(path) as f:\n                data = yaml.safe_load(f)\n                return parse_plugin_config(data)\n\n    return {}\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#plugin-testing","title":"Plugin Testing","text":""},{"location":"development/PLUGIN_ARCHITECTURE/#test-utilities","title":"Test Utilities","text":"<pre><code># ebk/plugins/testing.py\nfrom unittest.mock import Mock, AsyncMock\n\nclass PluginTestCase:\n    \"\"\"Base test case for plugins.\"\"\"\n\n    def create_mock_entry(self, **kwargs) -&gt; Entry:\n        \"\"\"Create a mock entry for testing.\"\"\"\n        defaults = {\n            \"unique_id\": \"test123\",\n            \"title\": \"Test Book\",\n            \"creators\": [\"Test Author\"],\n            \"subjects\": [\"Testing\"],\n            \"language\": \"en\"\n        }\n        defaults.update(kwargs)\n        return Entry(**defaults)\n\n    def create_mock_plugin(self, plugin_class: Type[Plugin]) -&gt; Mock:\n        \"\"\"Create a mock plugin.\"\"\"\n        mock = Mock(spec=plugin_class)\n        mock.name = f\"mock_{plugin_class.__name__}\"\n        return mock\n\n# Example test\ndef test_google_books_extractor():\n    extractor = GoogleBooksExtractor(api_key=\"test_key\")\n\n    with patch(\"aiohttp.ClientSession\") as mock_session:\n        mock_response = AsyncMock()\n        mock_response.json.return_value = {\n            \"totalItems\": 1,\n            \"items\": [{\n                \"volumeInfo\": {\n                    \"title\": \"Test Book\",\n                    \"authors\": [\"Test Author\"]\n                }\n            }]\n        }\n        mock_session.get.return_value.__aenter__.return_value = mock_response\n\n        result = await extractor.extract(isbn=\"1234567890\")\n        assert result[\"title\"] == \"Test Book\"\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#plugin-packaging","title":"Plugin Packaging","text":""},{"location":"development/PLUGIN_ARCHITECTURE/#directory-structure","title":"Directory Structure","text":"<pre><code>my-ebk-plugin/\n\u251c\u2500\u2500 pyproject.toml\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 my_plugin/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 extractor.py\n\u2502       \u251c\u2500\u2500 tagger.py\n\u2502       \u2514\u2500\u2500 config.py\n\u2514\u2500\u2500 tests/\n    \u2514\u2500\u2500 test_plugin.py\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#setup-configuration","title":"Setup Configuration","text":"<pre><code># pyproject.toml\n[build-system]\nrequires = [\"setuptools&gt;=61.0\", \"wheel\"]\nbuild-backend = \"setuptools.build_meta\"\n\n[project]\nname = \"ebk-my-plugin\"\nversion = \"1.0.0\"\ndependencies = [\n    \"ebk&gt;=2.0.0\",\n    \"aiohttp&gt;=3.8.0\"\n]\n\n[project.entry-points.\"ebk.plugins\"]\nmy_extractor = \"my_plugin:MyExtractor\"\nmy_tagger = \"my_plugin:MyTagger\"\n</code></pre>"},{"location":"development/PLUGIN_ARCHITECTURE/#best-practices","title":"Best Practices","text":"<ol> <li>Async First: Make plugins async for better performance</li> <li>Error Handling: Never let plugin errors crash the main app</li> <li>Logging: Use structured logging for debugging</li> <li>Caching: Cache expensive operations</li> <li>Rate Limiting: Respect API rate limits</li> <li>Configuration: Make everything configurable</li> <li>Testing: Provide comprehensive tests</li> <li>Documentation: Document all plugin capabilities</li> <li>Versioning: Use semantic versioning</li> <li>Dependencies: Keep dependencies minimal</li> </ol> <p>This plugin architecture provides a robust, extensible foundation for EBK that allows users and developers to add functionality without modifying core code.</p>"},{"location":"development/api-reference/","title":"API Reference","text":"<p>Complete API reference documentation for ebk developers.</p>"},{"location":"development/api-reference/#core-modules","title":"Core Modules","text":""},{"location":"development/api-reference/#ebklibrary_db","title":"ebk.library_db","text":"<p>The main <code>Library</code> class for all library operations.</p> <pre><code>from ebk.library_db import Library\n</code></pre> <p>See Python API Guide for usage examples.</p>"},{"location":"development/api-reference/#ebkdbmodels","title":"ebk.db.models","text":"<p>SQLAlchemy ORM models:</p> <ul> <li><code>Book</code> - Main book entity</li> <li><code>Author</code> - Author model</li> <li><code>Subject</code> - Subject/category model</li> <li><code>Tag</code> - Hierarchical user tags</li> <li><code>File</code> - Ebook file records</li> <li><code>Cover</code> - Cover images</li> <li><code>PersonalMetadata</code> - Reading status, ratings</li> <li><code>Identifier</code> - ISBN, DOI, etc.</li> <li><code>Annotation</code> - Notes and highlights</li> </ul>"},{"location":"development/api-reference/#ebkservices","title":"ebk.services","text":"<p>Service layer modules:</p> <ul> <li><code>ImportService</code> - Book import and metadata extraction</li> <li><code>ExportService</code> - Export to JSON, CSV, HTML, OPDS</li> <li><code>PersonalMetadataService</code> - Ratings, favorites, reading status</li> <li><code>TextExtractionService</code> - Full-text extraction</li> </ul>"},{"location":"development/api-reference/#ebkviews","title":"ebk.views","text":"<p>View DSL for saved queries:</p> <ul> <li><code>ViewService</code> - Create, list, evaluate views</li> <li>View DSL parser and compiler</li> </ul>"},{"location":"development/api-reference/#ebksimilarity","title":"ebk.similarity","text":"<p>Book similarity and recommendations:</p> <ul> <li><code>find_similar_books()</code> - Find similar books</li> <li>TF-IDF and metadata-based similarity</li> </ul>"},{"location":"development/api-reference/#ebkplugins","title":"ebk.plugins","text":"<p>Plugin system:</p> <ul> <li><code>Plugin</code> - Base plugin class</li> <li><code>HookRegistry</code> - Event hooks</li> <li><code>PluginRegistry</code> - Plugin discovery</li> </ul>"},{"location":"development/api-reference/#see-also","title":"See Also","text":"<ul> <li>Python API Guide - Detailed API usage</li> <li>Architecture - System architecture</li> <li>Plugin System - Plugin development</li> </ul>"},{"location":"development/architecture/","title":"Architecture","text":"<p>ebk's architecture and design patterns.</p>"},{"location":"development/architecture/#overview","title":"Overview","text":"<p>ebk is built around several key architectural principles:</p> <ol> <li>SQLAlchemy ORM - Database-first design with normalized schema</li> <li>Service Layer - Business logic separated from data access</li> <li>Provider Pattern - Pluggable LLM and metadata providers</li> <li>Fluent API - Method chaining for intuitive queries</li> <li>Configuration Management - Centralized settings with CLI overrides</li> </ol>"},{"location":"development/architecture/#core-components","title":"Core Components","text":""},{"location":"development/architecture/#database-layer-ebkdb","title":"Database Layer (<code>ebk/db/</code>)","text":"<p>Models (<code>models.py</code>): - <code>Book</code> - Core book entity with metadata - <code>Author</code> - Author information with sort names - <code>Subject</code> - Tags/subjects/categories - <code>File</code> - Physical file records with hash-based deduplication - <code>ExtractedText</code> - Full text from ebooks - <code>TextChunk</code> - Overlapping chunks for semantic search - <code>Cover</code> - Cover images with thumbnails - <code>BooksFTS</code> - FTS5 virtual table for full-text search</p> <p>Session Management (<code>session.py</code>): - Database initialization and schema creation - FTS5 index setup - Connection pooling</p>"},{"location":"development/architecture/#service-layer-ebkservices","title":"Service Layer (<code>ebk/services/</code>)","text":"<p>Import Service (<code>import_service.py</code>): - Book import with metadata extraction - Hash-based file deduplication - Cover extraction and thumbnail generation - Text extraction coordination</p> <p>Text Extraction (<code>text_extraction.py</code>): - PDF extraction (PyMuPDF, pypdf fallback) - EPUB extraction (ebooklib) - Plaintext handling - Chunking for semantic search</p>"},{"location":"development/architecture/#aillm-layer-ebkai","title":"AI/LLM Layer (<code>ebk/ai/</code>)","text":"<p>LLM Providers (<code>llm_providers/</code>): - <code>BaseLLMProvider</code> - Abstract interface - <code>OllamaProvider</code> - Local and remote Ollama - Future: OpenAI, Anthropic, MCP providers</p> <p>Metadata Enrichment (<code>metadata_enrichment.py</code>): - Auto-tagging - Categorization - Description enhancement - Difficulty assessment</p> <p>Knowledge Graph (<code>knowledge_graph.py</code>): - NetworkX-based concept graph - Entity extraction - Relationship mapping</p> <p>Semantic Search (<code>semantic_search.py</code>): - Vector embeddings - Similarity search - Query expansion</p>"},{"location":"development/architecture/#configuration-ebkconfigpy","title":"Configuration (<code>ebk/config.py</code>)","text":"<p>Four configuration sections: - <code>LLMConfig</code> - Provider, model, host, port, API key - <code>ServerConfig</code> - Host, port, auto-open, page size - <code>CLIConfig</code> - Verbosity, color, page size - <code>LibraryConfig</code> - Default library path</p> <p>Stored at: <code>~/.config/ebk/config.json</code></p>"},{"location":"development/architecture/#web-server-ebkserverpy","title":"Web Server (<code>ebk/server.py</code>)","text":"<p>FastAPI-based REST API: - Book CRUD operations - Search and filtering - Cover serving - File downloads - Reading status management</p>"},{"location":"development/architecture/#cli-ebkclipy","title":"CLI (<code>ebk/cli.py</code>)","text":"<p>Typer-based command-line interface: - <code>db-*</code> commands for library management - <code>serve</code> for web server - <code>enrich</code> for AI metadata enrichment - <code>config</code> for configuration management</p>"},{"location":"development/architecture/#design-patterns","title":"Design Patterns","text":""},{"location":"development/architecture/#fluent-query-api","title":"Fluent Query API","text":"<p>Method chaining for intuitive queries:</p> <pre><code>results = (lib.query()\n    .filter_by_language(\"en\")\n    .filter_by_author(\"Knuth\")\n    .order_by(\"title\")\n    .limit(20)\n    .all())\n</code></pre>"},{"location":"development/architecture/#hash-based-deduplication","title":"Hash-Based Deduplication","text":"<p>Files deduplicated using SHA256: - Same file (same hash) \u2192 skipped - Same book, different format \u2192 added as additional format - Hash-prefixed storage: <code>files/ab/abc123.pdf</code></p>"},{"location":"development/architecture/#provider-pattern","title":"Provider Pattern","text":"<p>Swappable LLM backends:</p> <pre><code>from ebk.ai.llm_providers.ollama import OllamaProvider\n\n# Local Ollama\nprovider = OllamaProvider.local(model=\"llama3.2\")\n\n# Remote GPU server\nprovider = OllamaProvider.remote(\n    host=\"192.168.0.225\",\n    model=\"llama3.2\"\n)\n\nasync with provider:\n    response = await provider.complete(\"prompt\")\n</code></pre>"},{"location":"development/architecture/#configuration-hierarchy","title":"Configuration Hierarchy","text":"<p>CLI options &gt; Config file &gt; Defaults:</p> <pre><code># Load config with defaults\nconfig = load_config()\n\n# Override from CLI\nif cli_host:\n    config.server.host = cli_host\n</code></pre>"},{"location":"development/architecture/#database-schema","title":"Database Schema","text":"<p>Library directory structure: <pre><code>my-library/\n\u251c\u2500\u2500 library.db              # SQLite database\n\u251c\u2500\u2500 files/                  # Hash-prefixed ebook storage\n\u2502   \u251c\u2500\u2500 ab/\n\u2502   \u2502   \u2514\u2500\u2500 abc123...pdf\n\u2502   \u2514\u2500\u2500 cd/\n\u2502       \u2514\u2500\u2500 cde456...epub\n\u251c\u2500\u2500 covers/                 # Cover images\n\u2502   \u251c\u2500\u2500 ab/\n\u2502   \u2502   \u2514\u2500\u2500 abc123.jpg\n\u2502   \u2514\u2500\u2500 thumbnails/\n\u2502       \u2514\u2500\u2500 abc123_thumb.jpg\n\u2514\u2500\u2500 vectors/                # Vector embeddings (future)\n    \u2514\u2500\u2500 embeddings.pkl\n</code></pre></p>"},{"location":"development/architecture/#key-technologies","title":"Key Technologies","text":"<ul> <li>SQLAlchemy - ORM and database toolkit</li> <li>SQLite with FTS5 - Database and full-text search</li> <li>FastAPI - Web framework for REST API</li> <li>Typer + Rich - CLI framework with colored output</li> <li>httpx - Async HTTP client for LLM providers</li> <li>PyMuPDF / pypdf - PDF text extraction</li> <li>ebooklib - EPUB parsing</li> <li>Pillow - Image processing for covers</li> <li>NetworkX - Graph algorithms for knowledge graph</li> </ul>"},{"location":"development/architecture/#extension-points","title":"Extension Points","text":"<ol> <li>LLM Providers - Implement <code>BaseLLMProvider</code></li> <li>Plugins - Use plugin registry in <code>ebk/plugins/</code></li> <li>Metadata Extractors - Add to <code>integrations/metadata/</code></li> <li>Export Formats - Add to <code>ebk/exports/</code></li> </ol>"},{"location":"development/architecture/#see-also","title":"See Also","text":"<ul> <li>Contributing Guide - How to contribute</li> <li>API Reference - Python API documentation</li> <li>Source code on GitHub</li> </ul>"},{"location":"development/contributing/","title":"Contributing","text":"<p>Guide to contributing to ebk.</p> <p>We welcome contributions! Whether you're fixing bugs, adding features, improving documentation, or reporting issues, your help is appreciated.</p>"},{"location":"development/contributing/#development-setup","title":"Development Setup","text":""},{"location":"development/contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10 or higher</li> <li>Git</li> <li>(Optional) Ollama for LLM features</li> </ul>"},{"location":"development/contributing/#setup-steps","title":"Setup Steps","text":"<pre><code># Clone the repository\ngit clone https://github.com/queelius/ebk.git\ncd ebk\n\n# Create virtual environment and install dependencies\nmake setup\n\n# Or manually:\npython -m venv .venv\nsource .venv/bin/activate  # On Windows: .venv\\Scripts\\activate\npip install -e \".[dev,all]\"\n</code></pre>"},{"location":"development/contributing/#running-tests","title":"Running Tests","text":"<pre><code># Run all tests\nmake test\n\n# Run with coverage\nmake test-coverage\n\n# Run specific test file\npytest tests/test_library_api.py -v\n\n# Run unit tests only\npytest -m unit\n\n# Run integration tests only\npytest -m integration\n</code></pre>"},{"location":"development/contributing/#code-quality","title":"Code Quality","text":"<pre><code># Run linters\nmake lint\n\n# Format code\nmake format\n\n# Check formatting\nmake format-check\n</code></pre>"},{"location":"development/contributing/#making-changes","title":"Making Changes","text":"<ol> <li> <p>Create a branch for your changes:    <pre><code>git checkout -b feature/my-new-feature\n</code></pre></p> </li> <li> <p>Make your changes following the project style:</p> </li> <li>Use type hints</li> <li>Add docstrings to public APIs</li> <li>Follow PEP 8 style guide</li> <li> <p>Keep functions focused and small</p> </li> <li> <p>Write tests for new functionality:</p> </li> <li>Add unit tests in <code>tests/</code></li> <li>Aim for &gt;80% code coverage</li> <li> <p>Test edge cases and error handling</p> </li> <li> <p>Update documentation:</p> </li> <li>Update <code>/docs</code> for user-facing changes</li> <li>Update docstrings for API changes</li> <li> <p>Add examples for new features</p> </li> <li> <p>Commit your changes:    <pre><code>git add .\ngit commit -m \"Add feature: brief description\"\n</code></pre></p> </li> <li> <p>Push and create PR:    <pre><code>git push origin feature/my-new-feature\n</code></pre>    Then create a pull request on GitHub.</p> </li> </ol>"},{"location":"development/contributing/#project-structure","title":"Project Structure","text":"<pre><code>ebk/\n\u251c\u2500\u2500 ebk/                    # Main package\n\u2502   \u251c\u2500\u2500 ai/                # AI/LLM features\n\u2502   \u251c\u2500\u2500 db/                # Database models\n\u2502   \u251c\u2500\u2500 services/          # Business logic\n\u2502   \u251c\u2500\u2500 cli.py            # CLI commands\n\u2502   \u251c\u2500\u2500 server.py         # Web server\n\u2502   \u2514\u2500\u2500 config.py         # Configuration\n\u251c\u2500\u2500 tests/                 # Test suite\n\u251c\u2500\u2500 docs/                  # Documentation\n\u2514\u2500\u2500 integrations/          # Optional integrations\n</code></pre>"},{"location":"development/contributing/#code-style-guidelines","title":"Code Style Guidelines","text":"<ul> <li>Type Hints: Use type hints for all function signatures</li> <li>Docstrings: Use Google-style docstrings</li> <li>Naming:</li> <li><code>snake_case</code> for functions and variables</li> <li><code>PascalCase</code> for classes</li> <li><code>UPPER_CASE</code> for constants</li> <li>Line Length: Maximum 100 characters</li> <li>Imports: Group standard library, third-party, and local imports</li> </ul>"},{"location":"development/contributing/#adding-new-features","title":"Adding New Features","text":""},{"location":"development/contributing/#adding-an-llm-provider","title":"Adding an LLM Provider","text":"<ol> <li>Create new file in <code>ebk/ai/llm_providers/</code></li> <li>Subclass <code>BaseLLMProvider</code></li> <li>Implement required methods</li> <li>Add tests in <code>tests/ai/</code></li> <li>Update documentation</li> </ol> <p>Example: <pre><code>from .base import BaseLLMProvider, LLMResponse\n\nclass MyProvider(BaseLLMProvider):\n    @property\n    def name(self) -&gt; str:\n        return \"my_provider\"\n\n    async def complete(self, prompt: str, **kwargs) -&gt; LLMResponse:\n        # Implementation\n        pass\n</code></pre></p>"},{"location":"development/contributing/#adding-a-cli-command","title":"Adding a CLI Command","text":"<ol> <li>Add command function in <code>ebk/cli.py</code></li> <li>Use <code>@app.command()</code> decorator</li> <li>Add type hints and help text</li> <li>Load config defaults when appropriate</li> <li>Update <code>docs/user-guide/cli.md</code></li> </ol>"},{"location":"development/contributing/#adding-documentation","title":"Adding Documentation","text":"<ol> <li>Add markdown files to appropriate <code>/docs</code> subdirectory</li> <li>Update <code>mkdocs.yml</code> navigation</li> <li>Follow existing documentation style</li> <li>Include code examples</li> <li>Test with <code>mkdocs serve</code></li> </ol>"},{"location":"development/contributing/#reporting-issues","title":"Reporting Issues","text":"<p>When reporting bugs, please include:</p> <ul> <li>ebk version (<code>ebk --version</code>)</li> <li>Python version</li> <li>Operating system</li> <li>Steps to reproduce</li> <li>Expected vs actual behavior</li> <li>Error messages and stack traces</li> </ul>"},{"location":"development/contributing/#feature-requests","title":"Feature Requests","text":"<p>For feature requests, please describe:</p> <ul> <li>The use case</li> <li>Why existing features don't suffice</li> <li>Proposed API or interface</li> <li>Any implementation ideas</li> </ul>"},{"location":"development/contributing/#questions","title":"Questions?","text":"<ul> <li>Open an issue on GitHub</li> <li>Check existing documentation</li> <li>Review architecture documentation</li> </ul>"},{"location":"development/contributing/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under the project's MIT License.</p>"},{"location":"getting-started/configuration/","title":"Configuration Guide","text":"<p>ebk uses a centralized configuration system that stores all settings in a single JSON file. This guide covers how to set up and manage your ebk configuration.</p>"},{"location":"getting-started/configuration/#configuration-file-location","title":"Configuration File Location","text":"<p>The configuration file is stored at:</p> <pre><code>~/.config/ebk/config.json\n</code></pre> <p>On Windows: <pre><code>%USERPROFILE%\\.config\\ebk\\config.json\n</code></pre></p> <p>For backward compatibility, ebk also supports the legacy <code>~/.ebkrc</code> file, but the new JSON format is recommended.</p>"},{"location":"getting-started/configuration/#configuration-structure","title":"Configuration Structure","text":"<p>The configuration file is organized into four main sections:</p>"},{"location":"getting-started/configuration/#llm-configuration","title":"LLM Configuration","text":"<p>Settings for Large Language Model providers used in metadata enrichment:</p> <pre><code>{\n  \"llm\": {\n    \"provider\": \"ollama\",\n    \"model\": \"llama3.2\",\n    \"host\": \"localhost\",\n    \"port\": 11434,\n    \"api_key\": null,\n    \"temperature\": 0.7,\n    \"max_tokens\": null\n  }\n}\n</code></pre> <ul> <li>provider: LLM provider name (<code>ollama</code>, <code>openai</code>, etc.)</li> <li>model: Model name to use</li> <li>host: Server hostname (for remote GPU servers)</li> <li>port: Server port</li> <li>api_key: API key for commercial providers (future)</li> <li>temperature: Sampling temperature (0.0-1.0, lower = more consistent)</li> <li>max_tokens: Maximum tokens to generate (null = provider default)</li> </ul>"},{"location":"getting-started/configuration/#server-configuration","title":"Server Configuration","text":"<p>Settings for the web server interface:</p> <pre><code>{\n  \"server\": {\n    \"host\": \"0.0.0.0\",\n    \"port\": 8000,\n    \"auto_open_browser\": false,\n    \"page_size\": 50\n  }\n}\n</code></pre> <ul> <li>host: Server bind address (<code>0.0.0.0</code> = all interfaces, <code>127.0.0.1</code> = localhost only)</li> <li>port: Server port</li> <li>auto_open_browser: Automatically open browser when starting server</li> <li>page_size: Default number of books per page</li> </ul>"},{"location":"getting-started/configuration/#cli-configuration","title":"CLI Configuration","text":"<p>Default CLI behavior settings:</p> <pre><code>{\n  \"cli\": {\n    \"verbose\": false,\n    \"color\": true,\n    \"page_size\": 50\n  }\n}\n</code></pre> <ul> <li>verbose: Enable verbose logging by default</li> <li>color: Enable colored output (uses Rich)</li> <li>page_size: Default page size for list commands</li> </ul>"},{"location":"getting-started/configuration/#library-configuration","title":"Library Configuration","text":"<p>Library-related preferences:</p> <pre><code>{\n  \"library\": {\n    \"default_path\": null\n  }\n}\n</code></pre> <ul> <li>default_path: Default library path (can be used with commands that accept an optional path)</li> </ul>"},{"location":"getting-started/configuration/#managing-configuration","title":"Managing Configuration","text":""},{"location":"getting-started/configuration/#initialize-configuration","title":"Initialize Configuration","text":"<p>Create a configuration file with default values:</p> <pre><code>ebk config init\n</code></pre> <p>This creates <code>~/.config/ebk/config.json</code> if it doesn't exist.</p>"},{"location":"getting-started/configuration/#view-configuration","title":"View Configuration","text":"<p>View the entire configuration:</p> <pre><code>ebk config show\n</code></pre> <p>View a specific section:</p> <pre><code>ebk config show --section llm\nebk config show --section server\n</code></pre>"},{"location":"getting-started/configuration/#edit-configuration","title":"Edit Configuration","text":"<p>Edit the configuration file in your default editor:</p> <pre><code>ebk config edit\n</code></pre> <p>This opens the JSON file in the editor specified by your <code>EDITOR</code> environment variable.</p>"},{"location":"getting-started/configuration/#set-configuration-values","title":"Set Configuration Values","text":"<p>Set individual configuration values:</p> <pre><code># Set LLM provider\nebk config set llm.provider ollama\nebk config set llm.model llama3.2\nebk config set llm.host localhost\n\n# Set server options\nebk config set server.port 8080\nebk config set server.auto_open_browser true\n\n# Set CLI defaults\nebk config set cli.verbose true\nebk config set cli.page_size 100\n\n# Set library defaults\nebk config set library.default_path ~/my-ebooks\n</code></pre>"},{"location":"getting-started/configuration/#get-configuration-values","title":"Get Configuration Values","text":"<p>Retrieve specific configuration values:</p> <pre><code>ebk config get llm.model\nebk config get server.port\nebk config get library.default_path\n</code></pre>"},{"location":"getting-started/configuration/#common-configuration-scenarios","title":"Common Configuration Scenarios","text":""},{"location":"getting-started/configuration/#local-ollama-setup","title":"Local Ollama Setup","text":"<p>For running LLM features with a local Ollama instance:</p> <pre><code>ebk config init\nebk config set llm.provider ollama\nebk config set llm.model llama3.2\nebk config set llm.host localhost\nebk config set llm.port 11434\n</code></pre> <p>Then install and start Ollama:</p> <pre><code># Install Ollama from https://ollama.com\n# Pull the model\nollama pull llama3.2\n\n# Ollama runs automatically on port 11434\n</code></pre>"},{"location":"getting-started/configuration/#remote-gpu-server","title":"Remote GPU Server","text":"<p>For using a remote GPU server (e.g., basement server with NVIDIA GPU):</p> <pre><code>ebk config set llm.host 192.168.1.100\nebk config set llm.model llama3.2\n</code></pre> <p>Or use hostname:</p> <pre><code>ebk config set llm.host basement-gpu.local\n</code></pre>"},{"location":"getting-started/configuration/#web-server-for-local-access-only","title":"Web Server for Local Access Only","text":"<p>For security, bind the web server to localhost only:</p> <pre><code>ebk config set server.host 127.0.0.1\nebk config set server.port 8000\n</code></pre>"},{"location":"getting-started/configuration/#web-server-for-network-access","title":"Web Server for Network Access","text":"<p>To allow access from other devices on your network:</p> <pre><code>ebk config set server.host 0.0.0.0\nebk config set server.port 8000\n</code></pre> <p>Then access from other devices at <code>http://your-ip:8000</code></p>"},{"location":"getting-started/configuration/#development-mode","title":"Development Mode","text":"<p>For development with verbose output:</p> <pre><code>ebk config set cli.verbose true\nebk config set cli.color true\n</code></pre>"},{"location":"getting-started/configuration/#cli-overrides","title":"CLI Overrides","text":"<p>All configuration settings can be overridden via CLI arguments:</p> <pre><code># Override server settings\nebk serve ~/library --host 127.0.0.1 --port 9000\n\n# Override LLM settings\nebk enrich ~/library --host 192.168.1.50 --model mistral\n\n# Enable verbose mode for single command\nebk --verbose import book.pdf ~/library\n</code></pre> <p>CLI arguments always take precedence over configuration file values.</p>"},{"location":"getting-started/configuration/#environment-variables","title":"Environment Variables","text":"<p>Some settings can also be controlled via environment variables:</p> <pre><code># Ollama settings\nexport OLLAMA_HOST=192.168.1.100\nexport OLLAMA_PORT=11434\n\n# Editor for config edit\nexport EDITOR=vim\n</code></pre>"},{"location":"getting-started/configuration/#configuration-best-practices","title":"Configuration Best Practices","text":"<ol> <li> <p>Set default library path: If you primarily work with one library, set it as default:    <pre><code>ebk config set library.default_path ~/my-ebooks\n</code></pre></p> </li> <li> <p>Use remote GPU for better performance: If you have a machine with a GPU, configure it as the LLM host:    <pre><code>ebk config set llm.host gpu-server.local\n</code></pre></p> </li> <li> <p>Enable auto-open for convenience: If you frequently use the web interface:    <pre><code>ebk config set server.auto_open_browser true\n</code></pre></p> </li> <li> <p>Lower temperature for metadata: For consistent metadata generation:    <pre><code>ebk config set llm.temperature 0.3\n</code></pre></p> </li> <li> <p>Adjust page size for your screen: Larger screens can show more items:    <pre><code>ebk config set cli.page_size 100\nebk config set server.page_size 100\n</code></pre></p> </li> </ol>"},{"location":"getting-started/configuration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/configuration/#configuration-file-not-found","title":"Configuration file not found","text":"<p>If commands don't use your configuration:</p> <pre><code># Check if config exists\nls -la ~/.config/ebk/config.json\n\n# Create if missing\nebk config init\n</code></pre>"},{"location":"getting-started/configuration/#invalid-json","title":"Invalid JSON","text":"<p>If you manually edited the config and broke it:</p> <pre><code># Backup and recreate\nmv ~/.config/ebk/config.json ~/.config/ebk/config.json.bak\nebk config init\n</code></pre>"},{"location":"getting-started/configuration/#llm-connection-issues","title":"LLM connection issues","text":"<p>If metadata enrichment fails:</p> <pre><code># Test Ollama connection\ncurl http://localhost:11434/api/tags\n\n# Or remote server\ncurl http://192.168.1.100:11434/api/tags\n\n# Check configuration\nebk config get llm.host\nebk config get llm.port\n</code></pre>"},{"location":"getting-started/configuration/#server-wont-start","title":"Server won't start","text":"<p>If the web server fails to start:</p> <pre><code># Check if port is in use\nlsof -i :8000\n\n# Try different port\nebk serve ~/library --port 8080\n\n# Or update config\nebk config set server.port 8080\n</code></pre>"},{"location":"getting-started/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start Guide - Start using ebk</li> <li>LLM Features - Learn about AI-powered features</li> <li>Web Server Guide - Use the web interface</li> <li>CLI Reference - Complete command reference</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.10 or higher</li> <li>pip package manager</li> </ul>"},{"location":"getting-started/installation/#basic-installation","title":"Basic Installation","text":"<p>Install the core ebk package:</p> <pre><code>pip install ebk\n</code></pre>"},{"location":"getting-started/installation/#installation-with-optional-features","title":"Installation with Optional Features","text":""},{"location":"getting-started/installation/#web-dashboard","title":"Web Dashboard","text":"<pre><code>pip install ebk[streamlit]\n</code></pre>"},{"location":"getting-started/installation/#visualization-tools","title":"Visualization Tools","text":"<pre><code>pip install ebk[viz]\n</code></pre>"},{"location":"getting-started/installation/#all-features","title":"All Features","text":"<pre><code>pip install ebk[all]\n</code></pre>"},{"location":"getting-started/installation/#development-installation","title":"Development Installation","text":"<pre><code>pip install ebk[dev]\n</code></pre>"},{"location":"getting-started/installation/#installing-from-source","title":"Installing from Source","text":"<ol> <li> <p>Clone the repository: <pre><code>git clone https://github.com/queelius/ebk.git\ncd ebk\n</code></pre></p> </li> <li> <p>Create a virtual environment (recommended): <pre><code>python -m venv venv\nsource venv/bin/activate  # On Windows: venv\\Scripts\\activate\n</code></pre></p> </li> <li> <p>Install in development mode: <pre><code>pip install -e \".[dev]\"\n</code></pre></p> </li> </ol>"},{"location":"getting-started/installation/#using-the-makefile","title":"Using the Makefile","text":"<p>The project includes a Makefile for common development tasks:</p> <pre><code># Set up complete development environment\nmake setup\n\n# Run tests\nmake test\n\n# Check code coverage\nmake test-coverage\n\n# Format code\nmake format\n\n# Run linting\nmake lint\n</code></pre>"},{"location":"getting-started/installation/#verifying-installation","title":"Verifying Installation","text":"<p>Check that ebk is installed correctly:</p> <pre><code>ebk --version\nebk --help\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Follow the Quick Start Guide to create your first library</li> <li>Read about Configuration options</li> <li>Explore the CLI Reference</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quick Start Guide","text":"<p>Get started with ebk in just a few minutes.</p>"},{"location":"getting-started/quickstart/#1-create-your-library","title":"1. Create Your Library","text":"<pre><code># Initialize a new library\nebk init ~/my-library\n</code></pre> <p>This creates: - <code>library.db</code> - SQLite database with FTS5 full-text search - <code>files/</code> - Hash-prefixed ebook storage - <code>covers/</code> - Cover images and thumbnails</p>"},{"location":"getting-started/quickstart/#2-import-books","title":"2. Import Books","text":""},{"location":"getting-started/quickstart/#single-file","title":"Single File","text":"<pre><code>ebk import add book.pdf ~/my-library\nebk import add ~/Downloads/book.epub ~/my-library\n</code></pre>"},{"location":"getting-started/quickstart/#batch-import","title":"Batch Import","text":"<pre><code># Import all ebooks from a folder\nebk import folder ~/Downloads/ebooks ~/my-library\n\n# With specific extensions\nebk import folder ~/Downloads ~/my-library --extensions pdf,epub\n</code></pre>"},{"location":"getting-started/quickstart/#from-calibre","title":"From Calibre","text":"<pre><code>ebk import calibre ~/Calibre/Library ~/my-library\n</code></pre>"},{"location":"getting-started/quickstart/#from-opds-feed","title":"From OPDS Feed","text":"<pre><code>ebk import opds \"https://example.com/opds/catalog.xml\" ~/my-library\n</code></pre>"},{"location":"getting-started/quickstart/#by-isbn","title":"By ISBN","text":"<pre><code>ebk import isbn 978-0201633610 ~/my-library\n</code></pre>"},{"location":"getting-started/quickstart/#3-browse-your-library","title":"3. Browse Your Library","text":""},{"location":"getting-started/quickstart/#list-books","title":"List Books","text":"<pre><code># List all books\nebk list ~/my-library\n\n# With filters\nebk list ~/my-library --author \"Knuth\" --language en\nebk list ~/my-library --limit 20 --offset 40  # Page 3\n</code></pre>"},{"location":"getting-started/quickstart/#search","title":"Search","text":"<pre><code># Full-text search\nebk search \"machine learning\" ~/my-library\n\n# Field-specific search\nebk search \"author:Knuth\" ~/my-library\nebk search \"title:Python language:en\" ~/my-library\nebk search \"rating:&gt;=4 subject:Algorithms\" ~/my-library\n</code></pre>"},{"location":"getting-started/quickstart/#view-details","title":"View Details","text":"<pre><code>ebk book info 42 ~/my-library\n</code></pre>"},{"location":"getting-started/quickstart/#statistics","title":"Statistics","text":"<pre><code>ebk stats ~/my-library\n</code></pre>"},{"location":"getting-started/quickstart/#4-organize-with-tags","title":"4. Organize with Tags","text":""},{"location":"getting-started/quickstart/#add-tags","title":"Add Tags","text":"<pre><code># Hierarchical tags\nebk tag list ~/my-library\nebk tag tree ~/my-library\n\n# Tag a book (use the shell for this)\nebk shell ~/my-library\nebk:/$ ln /books/42 /tags/Work/Projects\n</code></pre>"},{"location":"getting-started/quickstart/#create-views","title":"Create Views","text":"<p>Views are named, composable library subsets:</p> <pre><code># Create a view of favorite Python books\nebk view create python-favorites ~/my-library \\\n    --subject Python \\\n    --favorite\n\n# List views\nebk view list ~/my-library\n\n# Show books in a view\nebk view show python-favorites ~/my-library\n</code></pre>"},{"location":"getting-started/quickstart/#5-track-your-reading","title":"5. Track Your Reading","text":"<pre><code># Rate a book (0-5 stars)\nebk book rate 42 ~/my-library --rating 5\n\n# Mark as favorite\nebk book favorite 42 ~/my-library\n\n# Set reading status\nebk book status 42 ~/my-library --set reading\n\n# Track progress\nebk book progress 42 ~/my-library --set 45.5\n</code></pre>"},{"location":"getting-started/quickstart/#6-interactive-shell","title":"6. Interactive Shell","text":"<p>Navigate your library like a Unix filesystem:</p> <pre><code>ebk shell ~/my-library\n\n# Inside the shell:\nebk:/$ ls\nauthors/  books/  subjects/  tags/  similar/\n\nebk:/$ cd books/\nebk:/books$ ls | head 10\n\nebk:/books$ cd 42/\nebk:/books/42$ ls\n.metadata  .files  .covers  .similar\n\nebk:/books/42$ cat .metadata\n{title: \"Introduction to Algorithms\", ...}\n\nebk:/$ find author:Knuth rating:&gt;=4\nebk:/$ find subject:Python | wc\n</code></pre>"},{"location":"getting-started/quickstart/#7-export-your-library","title":"7. Export Your Library","text":"<pre><code># JSON (complete metadata)\nebk export json ~/my-library ~/backup.json\n\n# CSV\nebk export csv ~/my-library ~/catalog.csv\n\n# Goodreads (for import into Goodreads)\nebk export goodreads ~/my-library ~/goodreads.csv\n\n# Calibre (for import into Calibre)\nebk export calibre ~/my-library ~/calibre.csv\n\n# HTML catalog\nebk export html ~/my-library ~/catalog.html\n\n# OPDS feed (for e-reader apps)\nebk export opds ~/my-library ~/opds/catalog.xml\n</code></pre>"},{"location":"getting-started/quickstart/#8-web-interface","title":"8. Web Interface","text":"<pre><code>ebk serve ~/my-library\n# Open http://localhost:8000\n</code></pre>"},{"location":"getting-started/quickstart/#9-configuration-optional","title":"9. Configuration (Optional)","text":"<p>Set defaults to avoid repeating the library path:</p> <pre><code># Initialize config file\nebk config init\n\n# Set default library\nebk config set library.default_path ~/my-library\n\n# Now these work without specifying path:\nebk list\nebk search \"Python\"\nebk stats\n</code></pre>"},{"location":"getting-started/quickstart/#python-api","title":"Python API","text":"<pre><code>from pathlib import Path\nfrom ebk.library_db import Library\n\nlib = Library.open(Path(\"~/my-library\"))\n\n# Search\nresults = lib.search(\"Python programming\")\n\n# Fluent query\nbooks = (lib.query()\n    .filter_by_author(\"Knuth\")\n    .filter_by_language(\"en\")\n    .order_by(\"title\")\n    .limit(10)\n    .all())\n\n# Personal metadata\nfrom ebk.services import PersonalMetadataService\npm = PersonalMetadataService(lib.session)\npm.set_rating(42, 5.0)\npm.set_reading_status(42, \"reading\")\n\nlib.close()\n</code></pre>"},{"location":"getting-started/quickstart/#quick-reference","title":"Quick Reference","text":"Task Command Create library <code>ebk init ~/library</code> Import file <code>ebk import add book.pdf ~/library</code> Import folder <code>ebk import folder ~/books ~/library</code> List books <code>ebk list ~/library</code> Search <code>ebk search \"query\" ~/library</code> Book info <code>ebk book info 42 ~/library</code> Rate book <code>ebk book rate 42 ~/library --rating 5</code> Set status <code>ebk book status 42 ~/library --set reading</code> Export <code>ebk export json ~/library ~/out.json</code> Web UI <code>ebk serve ~/library</code> Shell <code>ebk shell ~/library</code>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration - Customize defaults</li> <li>CLI Reference - Complete command documentation</li> <li>Python API - Programmatic access</li> <li>Search Syntax - Advanced queries</li> <li>Import/Export - Data formats</li> </ul>"},{"location":"integrations/","title":"Integrations","text":"<p>Optional integrations for extended functionality.</p>"},{"location":"integrations/#available-integrations","title":"Available Integrations","text":"<ul> <li>Streamlit Dashboard - Web UI</li> <li>MCP Server - AI assistant integration</li> <li>Visualizations - Network graphs</li> </ul>"},{"location":"integrations/mcp/","title":"MCP Server","text":"<p>Model Context Protocol server for AI assistants.</p> <p>See integrations/mcp/README.md for details.</p>"},{"location":"integrations/streamlit/","title":"Streamlit Dashboard","text":"<p>Interactive web interface for ebk.</p>"},{"location":"integrations/streamlit/#installation","title":"Installation","text":"<pre><code>pip install ebk[streamlit]\n</code></pre> <p>See integrations/streamlit-dashboard/README.md for details.</p>"},{"location":"integrations/visualizations/","title":"Visualizations","text":"<p>Network analysis and visualization tools.</p> <p>See integrations/network/README.md for details.</p>"},{"location":"user-guide/api/","title":"Python API","text":"<p>Comprehensive guide to ebk's Python API for programmatic library management.</p>"},{"location":"user-guide/api/#overview","title":"Overview","text":"<p>ebk provides a SQLAlchemy-based API for managing ebook libraries. The API features:</p> <ul> <li>Fluent Query Builder for chainable, readable queries</li> <li>SQLAlchemy ORM Models (Book, Author, Subject, File, Cover, Tag)</li> <li>Full-text Search via SQLite FTS5</li> <li>Services Layer for metadata, import/export, and text extraction</li> </ul>"},{"location":"user-guide/api/#quick-start","title":"Quick Start","text":"<pre><code>from pathlib import Path\nfrom ebk.library_db import Library\n\n# Open or create a library\nlib = Library.open(Path(\"~/my-library\"))\n\n# Add a book\nbook = lib.add_book(\n    Path(\"book.epub\"),\n    metadata={\n        \"title\": \"Python Programming\",\n        \"creators\": [\"John Doe\"],\n        \"subjects\": [\"Programming\", \"Python\"],\n        \"language\": \"en\"\n    }\n)\n\n# Search for books\nresults = lib.search(\"python\")\n\n# Use fluent query builder\npython_books = (lib.query()\n    .filter_by_subject(\"Python\")\n    .filter_by_language(\"en\")\n    .order_by(\"title\")\n    .limit(10)\n    .all())\n\n# Get statistics\nstats = lib.stats()\nprint(f\"Total books: {stats['total_books']}\")\n\n# Always close when done\nlib.close()\n</code></pre>"},{"location":"user-guide/api/#core-classes","title":"Core Classes","text":""},{"location":"user-guide/api/#library","title":"Library","text":"<p>The main entry point for all library operations.</p> <pre><code>from ebk.library_db import Library\n\n# Open existing or create new library\nlib = Library.open(Path(\"/path/to/library\"))\n\n# Basic operations\nbook = lib.get_book(book_id)           # Get by ID\nbooks = lib.get_all_books()            # Get all books\nresults = lib.search(\"query string\")   # Full-text search\nstats = lib.stats()                    # Library statistics\n\n# Adding books\nbook = lib.add_book(\n    file_path=Path(\"book.pdf\"),\n    metadata={\n        \"title\": \"My Book\",\n        \"creators\": [\"Author Name\"],\n        \"subjects\": [\"Topic\"],\n        \"language\": \"en\",\n        \"publisher\": \"Publisher Name\",\n        \"publication_date\": \"2024\",\n        \"description\": \"Book description...\",\n        \"series\": \"Series Name\",\n        \"series_index\": \"1\"\n    },\n    extract_text=True,   # Extract text for full-text search\n    extract_cover=True   # Extract cover image\n)\n\n# Import from Calibre\nbook = lib.add_calibre_book(Path(\"/calibre/book/metadata.opf\"))\n\n# Batch import\nbooks = lib.batch_import([\n    (Path(\"book1.pdf\"), {\"title\": \"Book 1\", \"creators\": [\"Author\"]}),\n    (Path(\"book2.epub\"), {\"title\": \"Book 2\", \"creators\": [\"Author\"]}),\n])\n\n# Close when done\nlib.close()\n</code></pre>"},{"location":"user-guide/api/#querybuilder","title":"QueryBuilder","text":"<p>Fluent interface for building complex queries.</p> <pre><code># Start a query\nquery = lib.query()\n\n# Filter methods (chainable)\nquery = (lib.query()\n    .filter_by_author(\"Knuth\")\n    .filter_by_subject(\"Algorithms\")\n    .filter_by_language(\"en\")\n    .filter_by_format(\"pdf\")\n    .filter_by_rating(4.0)         # Minimum rating\n    .filter_by_favorite(True)\n    .filter_by_status(\"reading\")\n    .filter_by_tag(\"Work/Projects\")\n    .filter_by_series(\"TAOCP\"))\n\n# Ordering\nquery = query.order_by(\"title\")              # Ascending\nquery = query.order_by(\"created_at\", desc=True)  # Descending\n\n# Pagination\nquery = query.limit(20).offset(40)  # Page 3 of 20 results\n\n# Execute query\nbooks = query.all()           # Get all matching books\nbook = query.first()          # Get first match or None\ncount = query.count()         # Count matches\nexists = query.exists()       # Check if any match\n</code></pre>"},{"location":"user-guide/api/#orm-models","title":"ORM Models","text":"<p>SQLAlchemy models for database entities.</p>"},{"location":"user-guide/api/#book","title":"Book","text":"<pre><code>from ebk.db.models import Book\n\nbook = lib.get_book(1)\n\n# Scalar fields\nbook.id              # int\nbook.unique_id       # str (UUID)\nbook.title           # str\nbook.subtitle        # Optional[str]\nbook.language        # Optional[str]\nbook.publisher       # Optional[str]\nbook.publication_date # Optional[str]\nbook.description     # Optional[str]\nbook.series          # Optional[str]\nbook.series_index    # Optional[float]\nbook.page_count      # Optional[int]\nbook.created_at      # datetime\nbook.updated_at      # datetime\n\n# Relationships\nbook.authors         # List[Author]\nbook.subjects        # List[Subject]\nbook.files           # List[File]\nbook.covers          # List[Cover]\nbook.tags            # List[Tag]\nbook.identifiers     # List[Identifier]\nbook.personal        # Optional[PersonalMetadata]\nbook.annotations     # List[Annotation]\n</code></pre>"},{"location":"user-guide/api/#author","title":"Author","text":"<pre><code>author.id      # int\nauthor.name    # str\nauthor.books   # List[Book]\n</code></pre>"},{"location":"user-guide/api/#subject","title":"Subject","text":"<pre><code>subject.id     # int\nsubject.name   # str\nsubject.books  # List[Book]\n</code></pre>"},{"location":"user-guide/api/#tag","title":"Tag","text":"<p>Hierarchical user-defined tags.</p> <pre><code>tag.id         # int\ntag.name       # str (leaf name)\ntag.path       # str (e.g., \"Work/Projects\")\ntag.full_path  # str (complete path)\ntag.parent_id  # Optional[int]\ntag.children   # List[Tag]\ntag.books      # List[Book]\n</code></pre>"},{"location":"user-guide/api/#file","title":"File","text":"<pre><code>file.id         # int\nfile.path       # str (relative to library)\nfile.format     # str (pdf, epub, etc.)\nfile.size_bytes # int\nfile.file_hash  # str (SHA256)\nfile.book_id    # int\n</code></pre>"},{"location":"user-guide/api/#personalmetadata","title":"PersonalMetadata","text":"<p>User-specific reading data.</p> <pre><code>pm = book.personal\n\npm.rating           # Optional[float] (0-5)\npm.favorite         # bool\npm.reading_status   # str (unread, reading, read, abandoned)\npm.reading_progress # Optional[float] (0-100)\npm.date_started     # Optional[datetime]\npm.date_finished    # Optional[datetime]\npm.personal_tags    # Optional[List[str]]\npm.queue_position   # Optional[int]\n</code></pre>"},{"location":"user-guide/api/#services","title":"Services","text":""},{"location":"user-guide/api/#personalmetadataservice","title":"PersonalMetadataService","text":"<p>Manage reading status, ratings, and favorites.</p> <pre><code>from ebk.services import PersonalMetadataService\n\npm_svc = PersonalMetadataService(lib.session)\n\n# Ratings\npm_svc.set_rating(book_id, 4.5)\nrating = pm_svc.get_rating(book_id)\n\n# Favorites\npm_svc.set_favorite(book_id, True)\nfavorites = pm_svc.get_favorites()\n\n# Reading status\npm_svc.set_reading_status(book_id, \"reading\")\npm_svc.set_reading_progress(book_id, 45.0)\ncurrently_reading = pm_svc.get_by_status(\"reading\")\n</code></pre>"},{"location":"user-guide/api/#exportservice","title":"ExportService","text":"<p>Export library data in various formats.</p> <pre><code>from ebk.services import ExportService\n\nexport_svc = ExportService(lib.session, lib.library_path)\n\n# JSON export\njson_str = export_svc.export_json(books, pretty=True)\n\n# CSV export\ncsv_str = export_svc.export_csv(books)\n\n# Goodreads CSV (for import into Goodreads)\ngoodreads_csv = export_svc.export_goodreads_csv(books)\n\n# Calibre CSV\ncalibre_csv = export_svc.export_calibre_csv(books)\n\n# HTML catalog\nexport_svc.export_html(books, Path(\"catalog.html\"))\n\n# OPDS catalog\nexport_svc.export_opds(books, Path(\"catalog.xml\"))\n</code></pre>"},{"location":"user-guide/api/#viewservice","title":"ViewService","text":"<p>Manage named views (saved queries).</p> <pre><code>from ebk.views import ViewService\n\nview_svc = ViewService(lib.session)\n\n# Create a view\nview_svc.create(\n    name=\"favorites\",\n    definition={\"favorite\": True},\n    description=\"All favorite books\"\n)\n\n# List views\nviews = view_svc.list()\n\n# Evaluate a view (get matching books)\nbooks = view_svc.evaluate(\"favorites\")\n\n# Delete a view\nview_svc.delete(\"favorites\")\n</code></pre>"},{"location":"user-guide/api/#search","title":"Search","text":""},{"location":"user-guide/api/#simple-search","title":"Simple Search","text":"<pre><code># Search across title, authors, subjects, description\nresults = lib.search(\"python programming\")\n\n# Returns list of Book objects\nfor book in results:\n    print(f\"{book.title} by {', '.join(a.name for a in book.authors)}\")\n</code></pre>"},{"location":"user-guide/api/#advanced-search-syntax","title":"Advanced Search Syntax","text":"<p>The search parser supports field-specific queries:</p> <pre><code># Field-specific search\nresults = lib.search(\"title:Python\")\nresults = lib.search(\"author:Knuth\")\nresults = lib.search(\"subject:Algorithms\")\nresults = lib.search(\"language:en\")\n\n# Comparisons\nresults = lib.search(\"rating:&gt;=4\")\nresults = lib.search(\"year:2020\")\n\n# Boolean operators\nresults = lib.search(\"Python AND Django\")\nresults = lib.search(\"Python OR Ruby\")\nresults = lib.search(\"Python NOT beginner\")\n\n# Phrases\nresults = lib.search('\"machine learning\"')\n\n# Combined\nresults = lib.search('author:Knuth subject:Algorithms rating:&gt;=4')\n</code></pre>"},{"location":"user-guide/api/#book-operations","title":"Book Operations","text":""},{"location":"user-guide/api/#merging-duplicate-books","title":"Merging Duplicate Books","text":"<pre><code># Merge books 2 and 3 into book 1\nmerged_book, deleted_ids = lib.merge_books(\n    primary_id=1,\n    secondary_ids=[2, 3],\n    delete_secondary_files=False  # Keep duplicate files\n)\n</code></pre>"},{"location":"user-guide/api/#finding-similar-books","title":"Finding Similar Books","text":"<pre><code>from ebk.similarity import find_similar_books\n\nsimilar = find_similar_books(\n    lib.session,\n    book_id=1,\n    limit=10,\n    mode=\"hybrid\"  # or \"text\", \"metadata\"\n)\n\nfor book, score in similar:\n    print(f\"{book.title}: {score:.2f}\")\n</code></pre>"},{"location":"user-guide/api/#real-world-examples","title":"Real-World Examples","text":""},{"location":"user-guide/api/#building-a-reading-dashboard","title":"Building a Reading Dashboard","text":"<pre><code>from ebk.library_db import Library\nfrom ebk.services import PersonalMetadataService\n\nlib = Library.open(Path(\"~/library\"))\npm_svc = PersonalMetadataService(lib.session)\n\n# Get reading statistics\ncurrently_reading = pm_svc.get_by_status(\"reading\")\ncompleted_this_year = lib.query().filter_by_status(\"read\").all()\nfavorites = pm_svc.get_favorites()\n\nprint(f\"Currently reading: {len(currently_reading)} books\")\nprint(f\"Completed: {len(completed_this_year)} books\")\nprint(f\"Favorites: {len(favorites)} books\")\n\nlib.close()\n</code></pre>"},{"location":"user-guide/api/#batch-tagging","title":"Batch Tagging","text":"<pre><code># Add tag to all Python books\npython_books = lib.query().filter_by_subject(\"Python\").all()\n\nfor book in python_books:\n    lib.add_tag_to_book(book.id, \"Programming/Python\")\n\nlib.session.commit()\n</code></pre>"},{"location":"user-guide/api/#export-for-backup","title":"Export for Backup","text":"<pre><code>from ebk.services import ExportService\n\nlib = Library.open(Path(\"~/library\"))\nexport_svc = ExportService(lib.session, lib.library_path)\n\n# Export all books to JSON\nall_books = lib.get_all_books()\njson_backup = export_svc.export_json(all_books, pretty=True)\n\nwith open(\"library_backup.json\", \"w\") as f:\n    f.write(json_backup)\n\nlib.close()\n</code></pre>"},{"location":"user-guide/api/#best-practices","title":"Best Practices","text":"<ol> <li>Always close the library when done to release database connections</li> <li>Use context managers where possible for automatic cleanup</li> <li>Commit changes after modifications: <code>lib.session.commit()</code></li> <li>Use QueryBuilder for complex queries instead of raw SQL</li> <li>Handle missing fields gracefully (many fields are Optional)</li> </ol>"},{"location":"user-guide/api/#further-reading","title":"Further Reading","text":"<ul> <li>CLI Reference - Command-line interface</li> <li>LLM Features - AI-powered metadata enrichment</li> <li>Search &amp; Query - Advanced search syntax</li> <li>Import/Export - Data interchange formats</li> </ul>"},{"location":"user-guide/cli/","title":"CLI Reference","text":"<p>Complete reference for all ebk commands.</p>"},{"location":"user-guide/cli/#global-options","title":"Global Options","text":"<pre><code>ebk --help              # Show help\nebk --verbose           # Enable verbose output\nebk --version           # Show version\n</code></pre>"},{"location":"user-guide/cli/#library-management-commands","title":"Library Management Commands","text":""},{"location":"user-guide/cli/#init","title":"init","text":"<p>Initialize a new library:</p> <pre><code>ebk init &lt;library-path&gt;\n</code></pre> <p>Creates a new ebk library with database and directory structure.</p>"},{"location":"user-guide/cli/#import","title":"import","text":"<p>Import ebook files:</p> <pre><code>ebk import &lt;file&gt; &lt;library-path&gt;\nebk import &lt;file1&gt; &lt;file2&gt; ... &lt;library-path&gt;\nebk import ~/books/*.pdf &lt;library-path&gt;\n</code></pre> <p>Options: - <code>--extract-text</code> - Extract text for FTS (default: true) - <code>--extract-cover</code> - Extract cover image (default: true) - <code>--recursive</code> - Import directories recursively</p>"},{"location":"user-guide/cli/#import-calibre","title":"import-calibre","text":"<p>Import from Calibre library:</p> <pre><code>ebk import-calibre &lt;calibre-library&gt; --output &lt;ebk-library&gt;\n</code></pre> <p>Options: - <code>--output</code> - Output library path (required) - <code>--formats</code> - File formats to import (default: all)</p>"},{"location":"user-guide/cli/#list","title":"list","text":"<p>List books in library:</p> <pre><code>ebk list &lt;library-path&gt;\n</code></pre> <p>Options: - <code>--author &lt;name&gt;</code> - Filter by author - <code>--language &lt;code&gt;</code> - Filter by language (e.g., en, de) - <code>--format &lt;format&gt;</code> - Filter by file format (pdf, epub, mobi) - <code>--rating &lt;number&gt;</code> - Filter by minimum rating (0-5) - <code>--tag &lt;tag&gt;</code> - Filter by personal tag - <code>--limit &lt;number&gt;</code> - Limit results (default: 50) - <code>--sort-by &lt;field&gt;</code> - Sort by field (title, author, date, rating) - <code>--format json</code> - Output as JSON</p>"},{"location":"user-guide/cli/#search","title":"search","text":"<p>Full-text search:</p> <pre><code>ebk search &lt;query&gt; &lt;library-path&gt;\n</code></pre> <p>Searches across: - Book title - Description - Extracted text content</p> <p>Options: - <code>--fields &lt;field1,field2&gt;</code> - Limit search to specific fields - <code>--language &lt;code&gt;</code> - Filter by language - <code>--author &lt;name&gt;</code> - Filter by author - <code>--limit &lt;number&gt;</code> - Limit results</p>"},{"location":"user-guide/cli/#stats","title":"stats","text":"<p>Show library statistics:</p> <pre><code>ebk stats &lt;library-path&gt;\n</code></pre> <p>Options: - <code>--format json</code> - Output as JSON</p> <p>Displays: - Total books, authors, subjects - File formats and counts - Languages - Storage size</p>"},{"location":"user-guide/cli/#reading-management","title":"Reading Management","text":""},{"location":"user-guide/cli/#rate","title":"rate","text":"<p>Rate a book:</p> <pre><code>ebk rate &lt;library-path&gt; &lt;book-id&gt; &lt;rating&gt;\n</code></pre> <p>Rating: 0-5 (0 = unrated)</p>"},{"location":"user-guide/cli/#favorite","title":"favorite","text":"<p>Toggle favorite status:</p> <pre><code>ebk favorite &lt;library-path&gt; &lt;book-id&gt;\n</code></pre>"},{"location":"user-guide/cli/#tag","title":"tag","text":"<p>Manage personal tags:</p> <pre><code># Add tags\nebk tag &lt;library-path&gt; &lt;book-id&gt; --add \"tag1\" \"tag2\"\n\n# Remove tags\nebk tag &lt;library-path&gt; &lt;book-id&gt; --remove \"tag1\"\n\n# List tags\nebk tag &lt;library-path&gt; &lt;book-id&gt; --list\n</code></pre>"},{"location":"user-guide/cli/#purge","title":"purge","text":"<p>Remove books from library:</p> <pre><code>ebk purge &lt;library-path&gt; [options]\n</code></pre> <p>Options: - <code>--rating &lt;n&gt;</code> - Remove books with rating &lt;= n - <code>--unread</code> - Remove unread books - <code>--format &lt;fmt&gt;</code> - Remove specific format - <code>--confirm</code> - Skip confirmation prompt</p> <p>Warning: This permanently removes books!</p>"},{"location":"user-guide/cli/#web-server","title":"Web Server","text":""},{"location":"user-guide/cli/#serve","title":"serve","text":"<p>Start web server:</p> <pre><code>ebk serve &lt;library-path&gt;\n</code></pre> <p>Options: - <code>--host &lt;host&gt;</code> - Bind address (default: from config) - <code>--port &lt;port&gt;</code> - Port number (default: from config) - <code>--auto-open</code> - Open browser automatically</p>"},{"location":"user-guide/cli/#ai-powered-features","title":"AI-Powered Features","text":""},{"location":"user-guide/cli/#enrich","title":"enrich","text":"<p>Enrich metadata using LLM:</p> <pre><code>ebk enrich &lt;library-path&gt;\n</code></pre> <p>Options: - <code>--generate-tags</code> - Generate descriptive tags - <code>--categorize</code> - Assign hierarchical categories - <code>--enhance-descriptions</code> - Improve descriptions - <code>--assess-difficulty</code> - Determine reading level - <code>--book-id &lt;id&gt;</code> - Enrich specific book - <code>--host &lt;host&gt;</code> - LLM server host - <code>--model &lt;model&gt;</code> - LLM model name - <code>--dry-run</code> - Preview changes without saving - <code>--batch-size &lt;n&gt;</code> - Process n books at a time</p>"},{"location":"user-guide/cli/#configuration","title":"Configuration","text":""},{"location":"user-guide/cli/#config","title":"config","text":"<p>Manage configuration:</p> <pre><code># Initialize\nebk config init\n\n# View all\nebk config show\n\n# View section\nebk config show --section llm\n\n# Edit\nebk config edit\n\n# Set value\nebk config set &lt;key&gt; &lt;value&gt;\n\n# Get value\nebk config get &lt;key&gt;\n</code></pre> <p>Configuration keys: - <code>llm.provider</code> - LLM provider (ollama, openai) - <code>llm.model</code> - Model name - <code>llm.host</code> - Server host - <code>llm.port</code> - Server port - <code>llm.temperature</code> - Sampling temperature - <code>server.host</code> - Web server host - <code>server.port</code> - Web server port - <code>server.auto_open_browser</code> - Auto-open browser - <code>server.page_size</code> - Results per page - <code>cli.verbose</code> - Verbose output - <code>cli.color</code> - Colored output - <code>library.default_path</code> - Default library path</p>"},{"location":"user-guide/cli/#export-and-utilities","title":"Export and Utilities","text":""},{"location":"user-guide/cli/#export","title":"export","text":"<p>Export library:</p> <pre><code># Export to ZIP\nebk export zip &lt;library-path&gt; &lt;output.zip&gt;\n\n# Export to JSON\nebk export json &lt;library-path&gt; &lt;output.json&gt;\n</code></pre>"},{"location":"user-guide/cli/#vlib","title":"vlib","text":"<p>Manage virtual libraries (filtered views):</p> <pre><code># Create virtual library\nebk vlib create &lt;library-path&gt; &lt;name&gt; [filters]\n\n# List virtual libraries\nebk vlib list &lt;library-path&gt;\n\n# Delete virtual library\nebk vlib delete &lt;library-path&gt; &lt;name&gt;\n</code></pre>"},{"location":"user-guide/cli/#note","title":"note","text":"<p>Manage book notes and annotations:</p> <pre><code># Add note\nebk note add &lt;library-path&gt; &lt;book-id&gt; \"&lt;note text&gt;\"\n\n# List notes\nebk note list &lt;library-path&gt; &lt;book-id&gt;\n\n# Delete note\nebk note delete &lt;library-path&gt; &lt;note-id&gt;\n</code></pre>"},{"location":"user-guide/cli/#view","title":"view","text":"<p>View book content:</p> <pre><code>ebk view &lt;library-path&gt; &lt;book-id&gt;\n</code></pre> <p>Opens the book in the default application for its format.</p>"},{"location":"user-guide/cli/#about","title":"about","text":"<p>Show information about ebk:</p> <pre><code>ebk about\n</code></pre> <p>Displays version, installation path, and configuration location.</p>"},{"location":"user-guide/cli/#examples","title":"Examples","text":""},{"location":"user-guide/cli/#import-and-organize","title":"Import and Organize","text":"<pre><code># Create library\nebk init ~/my-library\n\n# Import Calibre collection\nebk import-calibre ~/Calibre/Library --output ~/my-library\n\n# Import additional files\nebk import ~/Downloads/*.pdf ~/my-library\n\n# Generate tags\nebk enrich ~/my-library --generate-tags\n</code></pre>"},{"location":"user-guide/cli/#search-and-filter","title":"Search and Filter","text":"<pre><code># Search for Python books\nebk search \"Python programming\" ~/my-library\n\n# List highly rated books\nebk list ~/my-library --rating 4\n\n# Find books by Knuth\nebk list ~/my-library --author Knuth\n</code></pre>"},{"location":"user-guide/cli/#web-interface-workflow","title":"Web Interface Workflow","text":"<pre><code># Configure server\nebk config set server.port 8000\nebk config set server.auto_open_browser true\n\n# Start server\nebk serve ~/my-library\n\n# Browse at http://localhost:8000\n</code></pre>"},{"location":"user-guide/cli/#batch-processing","title":"Batch Processing","text":"<pre><code># Import multiple directories\nfind ~/Downloads -name \"*.pdf\" -exec ebk import {} ~/my-library \\;\n\n# Enrich all books\nebk enrich ~/my-library --generate-tags --categorize --batch-size 10\n\n# Export for backup\nebk export zip ~/my-library ~/backup-$(date +%Y%m%d).zip\n</code></pre>"},{"location":"user-guide/cli/#see-also","title":"See Also","text":"<ul> <li>Configuration Guide - Configure defaults</li> <li>LLM Features - AI-powered enrichment</li> <li>Web Server - Web interface details</li> <li>Python API - Programmatic access</li> </ul>"},{"location":"user-guide/import-export/","title":"Import/Export","text":"<p>Complete guide to importing books and exporting library data.</p>"},{"location":"user-guide/import-export/#importing-books","title":"Importing Books","text":""},{"location":"user-guide/import-export/#from-individual-files","title":"From Individual Files","text":"<pre><code># Import a single ebook\nebk import add book.pdf ~/my-library\nebk import add ~/Downloads/book.epub ~/my-library\n\n# Import with specific metadata\nebk import add book.pdf ~/my-library \\\n    --title \"My Book\" \\\n    --author \"John Doe\"\n</code></pre>"},{"location":"user-guide/import-export/#batch-import-from-folder","title":"Batch Import from Folder","text":"<pre><code># Import all ebooks from a folder\nebk import folder ~/Downloads/ebooks ~/my-library\n\n# With specific extensions only\nebk import folder ~/Downloads ~/my-library --extensions pdf,epub,mobi\n\n# Recursive (include subfolders)\nebk import folder ~/ebooks ~/my-library --recursive\n\n# Resume interrupted import (skip already imported)\nebk import folder ~/ebooks ~/my-library --resume\n</code></pre>"},{"location":"user-guide/import-export/#from-calibre-library","title":"From Calibre Library","text":"<pre><code># Import entire Calibre library\nebk import calibre ~/Calibre/Library ~/my-library\n\n# Limit import\nebk import calibre ~/Calibre/Library ~/my-library --limit 100\n</code></pre>"},{"location":"user-guide/import-export/#from-opds-catalog","title":"From OPDS Catalog","text":"<p>Import from OPDS feeds (Gutenberg, Standard Ebooks, etc.):</p> <pre><code># Import from OPDS feed\nebk import opds \"https://standardebooks.org/opds\" ~/my-library\n\n# With limit\nebk import opds \"https://example.com/opds/catalog.xml\" ~/my-library --limit 50\n</code></pre>"},{"location":"user-guide/import-export/#from-url","title":"From URL","text":"<pre><code># Download and import from URL\nebk import url \"https://example.com/book.pdf\" ~/my-library\n</code></pre>"},{"location":"user-guide/import-export/#by-isbn","title":"By ISBN","text":"<p>Create a book entry by looking up ISBN from Google Books or Open Library:</p> <pre><code># Lookup by ISBN\nebk import isbn 978-0201633610 ~/my-library\n\n# With specific provider\nebk import isbn 978-0201633610 ~/my-library --provider google\nebk import isbn 978-0201633610 ~/my-library --provider openlibrary\n</code></pre>"},{"location":"user-guide/import-export/#exporting-library-data","title":"Exporting Library Data","text":""},{"location":"user-guide/import-export/#json-export","title":"JSON Export","text":"<p>Complete metadata export in JSON format:</p> <pre><code># Export all books\nebk export json ~/my-library ~/backup.json\n\n# Pretty-printed\nebk export json ~/my-library ~/backup.json --pretty\n\n# Export specific view\nebk export json ~/my-library ~/favorites.json --view favorites\n</code></pre>"},{"location":"user-guide/import-export/#csv-export","title":"CSV Export","text":"<p>Spreadsheet-compatible format:</p> <pre><code># Basic CSV export\nebk export csv ~/my-library ~/catalog.csv\n\n# Export specific view\nebk export csv ~/my-library ~/python-books.csv --view python\n</code></pre>"},{"location":"user-guide/import-export/#goodreads-export","title":"Goodreads Export","text":"<p>Export in Goodreads-compatible format for import into your Goodreads account:</p> <pre><code>ebk export goodreads ~/my-library ~/goodreads.csv\nebk export goodreads ~/my-library ~/favorites.csv --view favorites\n</code></pre> <p>The Goodreads CSV includes: - Title, Author, Additional Authors - ISBN/ISBN13 - My Rating (1-5 stars) - Exclusive Shelf (read, currently-reading, to-read) - Bookshelves (from tags) - Date Read, Date Added - Page count, Publisher, Year</p> <p>Import at: https://www.goodreads.com/review/import</p>"},{"location":"user-guide/import-export/#calibre-export","title":"Calibre Export","text":"<p>Export in Calibre-compatible format:</p> <pre><code>ebk export calibre ~/my-library ~/calibre.csv\nebk export calibre ~/my-library ~/subset.csv --view programming\n</code></pre> <p>The Calibre CSV includes: - title, authors, author_sort - publisher, pubdate - languages, rating (0-10 scale) - tags, series, series_index - identifiers (ISBN, ASIN, etc.) - comments/description</p>"},{"location":"user-guide/import-export/#html-export","title":"HTML Export","text":"<p>Self-contained HTML catalog with pagination and client-side filtering:</p> <pre><code># Basic export\nebk export html ~/my-library ~/catalog.html\n\n# With file and cover copying for static hosting\nebk export html ~/my-library ~/site/catalog.html \\\n    --base-url /library \\\n    --copy-files \\\n    --copy-covers\n\n# Export a specific view\nebk export html ~/my-library ~/favorites.html --view favorites\n\n# With filters\nebk export html ~/my-library ~/english.html \\\n    --language en \\\n    --has-files\n</code></pre> <p>HTML export features: - Pagination: 50 books per page - URL State: Bookmarkable page/filter state - Client-side Filtering: By language, format, series, favorites, rating - Sorting: By title, author, rating, date - Search Bar: Text search across metadata - Responsive: Desktop and mobile support - Offline: No server required</p>"},{"location":"user-guide/import-export/#opds-export","title":"OPDS Export","text":"<p>Create an OPDS catalog feed for e-reader apps (Foliate, KOReader, Moon+ Reader):</p> <pre><code># Basic OPDS catalog\nebk export opds ~/my-library ~/opds/catalog.xml\n\n# With file and cover copying\nebk export opds ~/my-library ~/opds/catalog.xml \\\n    --base-url https://example.com/opds \\\n    --copy-files \\\n    --copy-covers\n\n# Export a view\nebk export opds ~/my-library ~/opds/favorites.xml --view favorites\n</code></pre>"},{"location":"user-guide/import-export/#backup-and-restore","title":"Backup and Restore","text":""},{"location":"user-guide/import-export/#create-backup","title":"Create Backup","text":"<pre><code># Database backup (tar.gz)\nebk backup ~/my-library ~/backups/\n</code></pre>"},{"location":"user-guide/import-export/#restore-from-backup","title":"Restore from Backup","text":"<pre><code># Restore to new location\nebk restore ~/backups/library-2024-01-01.tar.gz ~/restored-library\n\n# Force overwrite existing\nebk restore ~/backups/backup.tar.gz ~/my-library --force\n</code></pre>"},{"location":"user-guide/import-export/#use-cases","title":"Use Cases","text":""},{"location":"user-guide/import-export/#migrating-from-calibre","title":"Migrating from Calibre","text":"<pre><code># 1. Import from Calibre\nebk import calibre ~/Calibre/Library ~/my-library\n\n# 2. Verify import\nebk stats ~/my-library\n\n# 3. Export to compare\nebk export json ~/my-library ~/imported.json\n</code></pre>"},{"location":"user-guide/import-export/#syncing-with-goodreads","title":"Syncing with Goodreads","text":"<pre><code># Export your ebk ratings and status\nebk export goodreads ~/my-library ~/sync.csv\n\n# Import at goodreads.com/review/import\n</code></pre>"},{"location":"user-guide/import-export/#publishing-a-web-catalog","title":"Publishing a Web Catalog","text":"<pre><code># 1. Create a view of books to share\nebk view create public ~/my-library \\\n    --has-files \\\n    --min-rating 3\n\n# 2. Export for web hosting\nebk export html ~/my-library ~/public/catalog.html \\\n    --view public \\\n    --base-url /books \\\n    --copy-files \\\n    --copy-covers\n\n# 3. Deploy\nrsync -av ~/public/ user@server:/var/www/books/\n</code></pre>"},{"location":"user-guide/import-export/#creating-an-opds-server","title":"Creating an OPDS Server","text":"<pre><code># 1. Export OPDS catalog\nebk export opds ~/my-library ~/opds/catalog.xml \\\n    --base-url https://myserver.com/opds \\\n    --copy-files \\\n    --copy-covers\n\n# 2. Serve with any static file server\ncd ~/opds &amp;&amp; python -m http.server 8080\n</code></pre>"},{"location":"user-guide/import-export/#data-analysis","title":"Data Analysis","text":"<pre><code># Export to JSON for analysis\nebk export json ~/my-library ~/data.json --pretty\n\n# Query with jq\njq '.[] | select(.rating &gt;= 4) | .title' ~/data.json\n\n# Load into Python/pandas\npython -c \"\nimport json\nimport pandas as pd\nwith open('data.json') as f:\n    books = json.load(f)\ndf = pd.DataFrame(books)\nprint(df.groupby('language').size())\n\"\n</code></pre>"},{"location":"user-guide/import-export/#python-api","title":"Python API","text":"<pre><code>from pathlib import Path\nfrom ebk.library_db import Library\nfrom ebk.services import ExportService\n\nlib = Library.open(Path(\"~/my-library\"))\nexport_svc = ExportService(lib.session, lib.library_path)\n\n# Get books (all or filtered)\nbooks = lib.get_all_books()\n# or\nbooks = lib.query().filter_by_language(\"en\").all()\n\n# Export to different formats\njson_str = export_svc.export_json(books, pretty=True)\ncsv_str = export_svc.export_csv(books)\ngoodreads_csv = export_svc.export_goodreads_csv(books)\ncalibre_csv = export_svc.export_calibre_csv(books)\n\n# Write to files\nwith open(\"backup.json\", \"w\") as f:\n    f.write(json_str)\n\nlib.close()\n</code></pre>"},{"location":"user-guide/import-export/#see-also","title":"See Also","text":"<ul> <li>CLI Reference - Complete command options</li> <li>Views - Create named subsets for export</li> <li>Search Syntax - Filter before exporting</li> </ul>"},{"location":"user-guide/library-management/","title":"Library Management","text":"<p>Managing your ebook library.</p>"},{"location":"user-guide/library-management/#see-also","title":"See Also","text":"<ul> <li>CLI Reference - Management commands</li> </ul>"},{"location":"user-guide/llm-features/","title":"LLM-Powered Features","text":"<p>ebk includes AI-powered features for metadata enrichment using Large Language Models (LLMs). These features can automatically generate tags, categorize books, enhance descriptions, and more.</p>"},{"location":"user-guide/llm-features/#overview","title":"Overview","text":"<p>The LLM features are built on an abstract provider system that supports multiple backends:</p> <ul> <li>Ollama - Local and remote models (currently supported)</li> <li>OpenAI - GPT models (planned)</li> <li>Anthropic - Claude models (planned)</li> <li>Custom providers - Extend with your own</li> </ul>"},{"location":"user-guide/llm-features/#quick-start","title":"Quick Start","text":""},{"location":"user-guide/llm-features/#1-install-ollama","title":"1. Install Ollama","text":"<p>First, install Ollama from https://ollama.com</p> <pre><code># On macOS/Linux\ncurl https://ollama.ai/install.sh | sh\n\n# Or download installer from website for Windows\n</code></pre>"},{"location":"user-guide/llm-features/#2-pull-a-model","title":"2. Pull a Model","text":"<pre><code># Pull the recommended model\nollama pull llama3.2\n\n# Or try other models\nollama pull mistral\nollama pull codellama\nollama pull phi3\n</code></pre>"},{"location":"user-guide/llm-features/#3-configure-ebk","title":"3. Configure ebk","text":"<pre><code>ebk config init\nebk config set llm.provider ollama\nebk config set llm.model llama3.2\nebk config set llm.host localhost\n</code></pre>"},{"location":"user-guide/llm-features/#4-enrich-your-library","title":"4. Enrich Your Library","text":"<pre><code># Basic enrichment\nebk enrich ~/my-library\n\n# Full enrichment with all features\nebk enrich ~/my-library \\\n  --generate-tags \\\n  --categorize \\\n  --enhance-descriptions\n</code></pre>"},{"location":"user-guide/llm-features/#metadata-enrichment-features","title":"Metadata Enrichment Features","text":""},{"location":"user-guide/llm-features/#generate-tags","title":"Generate Tags","text":"<p>Automatically generate relevant tags based on book metadata and content:</p> <pre><code># Generate tags for all books\nebk enrich ~/library --generate-tags\n\n# Generate tags for specific book\nebk enrich ~/library --book-id 42 --generate-tags\n</code></pre> <p>Example output: - Input: \"Introduction to Algorithms\" by Cormen et al. - Generated tags: <code>algorithms</code>, <code>computer-science</code>, <code>textbook</code>, <code>data-structures</code>, <code>complexity-theory</code></p>"},{"location":"user-guide/llm-features/#categorize-books","title":"Categorize Books","text":"<p>Automatically assign books to hierarchical categories:</p> <pre><code># Categorize all books\nebk enrich ~/library --categorize\n\n# Categorize specific book\nebk enrich ~/library --book-id 42 --categorize\n</code></pre> <p>Example categories: - <code>Technology &gt; Computer Science &gt; Algorithms</code> - <code>Technology &gt; Programming &gt; Python</code> - <code>Science &gt; Mathematics &gt; Statistics</code></p>"},{"location":"user-guide/llm-features/#enhance-descriptions","title":"Enhance Descriptions","text":"<p>Generate or improve book descriptions based on content samples:</p> <pre><code># Enhance descriptions\nebk enrich ~/library --enhance-descriptions\n\n# For specific book\nebk enrich ~/library --book-id 42 --enhance-descriptions\n</code></pre> <p>This feature: - Creates descriptions for books without them - Expands brief descriptions with more detail - Extracts key themes and topics - Maintains professional tone</p>"},{"location":"user-guide/llm-features/#assess-difficulty-level","title":"Assess Difficulty Level","text":"<p>Automatically determine the reading difficulty level:</p> <pre><code>ebk enrich ~/library --assess-difficulty\n</code></pre> <p>Difficulty levels: - <code>beginner</code> - Introductory material - <code>intermediate</code> - Requires some background - <code>advanced</code> - Specialized knowledge required - <code>expert</code> - Research-level content</p>"},{"location":"user-guide/llm-features/#full-enrichment","title":"Full Enrichment","text":"<p>Run all enrichment features at once:</p> <pre><code># Complete enrichment\nebk enrich ~/library \\\n  --generate-tags \\\n  --categorize \\\n  --enhance-descriptions \\\n  --assess-difficulty\n</code></pre>"},{"location":"user-guide/llm-features/#provider-configuration","title":"Provider Configuration","text":""},{"location":"user-guide/llm-features/#local-ollama","title":"Local Ollama","text":"<p>The default configuration uses a local Ollama instance:</p> <pre><code>ebk config set llm.provider ollama\nebk config set llm.model llama3.2\nebk config set llm.host localhost\nebk config set llm.port 11434\n</code></pre>"},{"location":"user-guide/llm-features/#remote-gpu-server","title":"Remote GPU Server","text":"<p>For faster processing, use a remote machine with GPU:</p> <pre><code># By IP address\nebk config set llm.host 192.168.1.100\n\n# Or by hostname\nebk config set llm.host gpu-server.local\n\n# Test connection\ncurl http://192.168.1.100:11434/api/tags\n</code></pre> <p>Setup remote Ollama:</p> <p>On the remote machine:</p> <pre><code># Install Ollama\ncurl https://ollama.ai/install.sh | sh\n\n# Pull models\nollama pull llama3.2\n\n# Ollama automatically listens on 0.0.0.0:11434\n</code></pre>"},{"location":"user-guide/llm-features/#cli-overrides","title":"CLI Overrides","text":"<p>Override config settings for individual commands:</p> <pre><code># Use different host\nebk enrich ~/library --host 192.168.1.100\n\n# Use different model\nebk enrich ~/library --model mistral\n\n# Combine options\nebk enrich ~/library \\\n  --host gpu-server.local \\\n  --model llama3.2:70b \\\n  --generate-tags \\\n  --categorize\n</code></pre>"},{"location":"user-guide/llm-features/#model-selection","title":"Model Selection","text":""},{"location":"user-guide/llm-features/#recommended-models","title":"Recommended Models","text":"Model Size Speed Quality Use Case <code>llama3.2</code> 7B Fast Good General purpose, recommended <code>llama3.2:1b</code> 1B Very fast Fair Quick processing, limited resources <code>llama3.2:70b</code> 70B Slow Excellent Best quality, requires GPU <code>mistral</code> 7B Fast Good Alternative to llama3.2 <code>phi3</code> 3.8B Fast Good Balanced speed/quality <code>codellama</code> 7B Fast Good Technical books"},{"location":"user-guide/llm-features/#model-parameters","title":"Model Parameters","text":"<p>Adjust model behavior:</p> <pre><code># Lower temperature for consistent results\nebk config set llm.temperature 0.3\n\n# Higher temperature for creative descriptions\nebk config set llm.temperature 0.9\n\n# Limit output length\nebk config set llm.max_tokens 500\n</code></pre> <p>Temperature guide: - <code>0.0-0.3</code> - Very consistent, factual (recommended for tags/categories) - <code>0.4-0.7</code> - Balanced (default) - <code>0.8-1.0</code> - Creative, varied (for descriptions)</p>"},{"location":"user-guide/llm-features/#python-api","title":"Python API","text":"<p>Use LLM features programmatically:</p> <pre><code>from ebk.ai.llm_providers.ollama import OllamaProvider\nfrom ebk.ai.metadata_enrichment import MetadataEnrichmentService\n\n# Initialize provider\nprovider = OllamaProvider.local(model=\"llama3.2\")\n\n# Or remote\nprovider = OllamaProvider.remote(\n    host=\"192.168.1.100\",\n    model=\"llama3.2\"\n)\n\n# Create enrichment service\nservice = MetadataEnrichmentService(provider)\n\n# Use async context manager\nasync with provider:\n    # Generate tags\n    tags = await service.generate_tags(\n        title=\"The Pragmatic Programmer\",\n        authors=[\"Hunt\", \"Thomas\"],\n        description=\"From journeyman to master\"\n    )\n    print(f\"Generated tags: {tags}\")\n\n    # Categorize\n    categories = await service.categorize(\n        title=\"Introduction to Algorithms\",\n        subjects=[\"Algorithms\", \"Computer Science\"]\n    )\n    print(f\"Categories: {categories}\")\n\n    # Enhance description\n    enhanced = await service.enhance_description(\n        title=\"Clean Code\",\n        text_sample=\"Chapter 1: Clean Code...\"\n    )\n    print(f\"Enhanced: {enhanced}\")\n</code></pre>"},{"location":"user-guide/llm-features/#batch-processing","title":"Batch Processing","text":"<p>Process multiple books efficiently:</p> <pre><code>from ebk.library_db import Library\nfrom ebk.ai.llm_providers.ollama import OllamaProvider\nfrom ebk.ai.metadata_enrichment import MetadataEnrichmentService\nfrom pathlib import Path\n\n# Open library\nlib = Library.open(Path(\"~/my-library\"))\n\n# Initialize provider\nprovider = OllamaProvider.local(model=\"llama3.2\")\nservice = MetadataEnrichmentService(provider)\n\nasync with provider:\n    # Get books without tags\n    books = lib.query().limit(10).all()\n\n    for book in books:\n        # Generate tags\n        tags = await service.generate_tags(\n            title=book.title,\n            authors=[a.name for a in book.authors],\n            description=book.description\n        )\n\n        # Add to library\n        lib.add_tags(book.id, tags)\n        print(f\"Added tags to {book.title}: {tags}\")\n\nlib.close()\n</code></pre>"},{"location":"user-guide/llm-features/#advanced-usage","title":"Advanced Usage","text":""},{"location":"user-guide/llm-features/#dry-run-mode","title":"Dry Run Mode","text":"<p>Preview changes without saving:</p> <pre><code># See what would be changed\nebk enrich ~/library --generate-tags --dry-run\n</code></pre> <p>This outputs proposed changes but doesn't modify the library.</p>"},{"location":"user-guide/llm-features/#selective-enrichment","title":"Selective Enrichment","text":"<p>Enrich only books matching criteria:</p> <pre><code># Only books without descriptions\nebk enrich ~/library --enhance-descriptions --filter \"description:null\"\n\n# Only books in specific language\nebk enrich ~/library --generate-tags --filter \"language:en\"\n\n# Only specific author\nebk enrich ~/library --categorize --filter \"author:Knuth\"\n</code></pre>"},{"location":"user-guide/llm-features/#custom-prompts","title":"Custom Prompts","text":"<p>Customize the prompts used for enrichment:</p> <pre><code>from ebk.ai.metadata_enrichment import MetadataEnrichmentService\n\nservice = MetadataEnrichmentService(provider)\n\n# Custom tag generation prompt\ncustom_prompt = \"\"\"\nBased on this book:\nTitle: {title}\nAuthors: {authors}\nDescription: {description}\n\nGenerate 5-7 specific technical tags focusing on:\n1. Programming languages mentioned\n2. Specific technologies or frameworks\n3. Target audience level\n4. Book format (reference, tutorial, guide)\n\nReturn as comma-separated list.\n\"\"\"\n\ntags = await service.generate_tags_with_prompt(\n    title=\"Python Crash Course\",\n    custom_prompt=custom_prompt\n)\n</code></pre>"},{"location":"user-guide/llm-features/#performance-optimization","title":"Performance Optimization","text":""},{"location":"user-guide/llm-features/#use-remote-gpu","title":"Use Remote GPU","text":"<p>10-100x speedup by using a machine with NVIDIA GPU:</p> <pre><code># Configure remote GPU server\nebk config set llm.host gpu-server.local\n\n# Verify GPU is being used\nssh gpu-server.local nvidia-smi\n</code></pre>"},{"location":"user-guide/llm-features/#batch-size","title":"Batch Size","text":"<p>Process multiple books in parallel:</p> <pre><code># Process 10 books at a time\nebk enrich ~/library --batch-size 10\n</code></pre>"},{"location":"user-guide/llm-features/#model-selection_1","title":"Model Selection","text":"<p>Choose model based on speed/quality tradeoff:</p> <pre><code># Fastest (1B parameters)\nebk enrich ~/library --model llama3.2:1b\n\n# Balanced (7B parameters, recommended)\nebk enrich ~/library --model llama3.2\n\n# Best quality (70B parameters, slow)\nebk enrich ~/library --model llama3.2:70b\n</code></pre>"},{"location":"user-guide/llm-features/#text-sampling","title":"Text Sampling","text":"<p>Limit text analyzed for speed:</p> <pre><code># Use first 5000 chars of extracted text\nebk enrich ~/library --text-sample-size 5000\n</code></pre>"},{"location":"user-guide/llm-features/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/llm-features/#connection-refused","title":"Connection Refused","text":"<p>If ebk can't connect to Ollama:</p> <pre><code># Check if Ollama is running\ncurl http://localhost:11434/api/tags\n\n# Start Ollama (if needed)\nollama serve\n\n# Check configuration\nebk config get llm.host\nebk config get llm.port\n</code></pre>"},{"location":"user-guide/llm-features/#model-not-found","title":"Model Not Found","text":"<p>If the model isn't available:</p> <pre><code># List available models\nollama list\n\n# Pull the required model\nollama pull llama3.2\n\n# Verify model is available\ncurl http://localhost:11434/api/tags\n</code></pre>"},{"location":"user-guide/llm-features/#slow-performance","title":"Slow Performance","text":"<p>If enrichment is too slow:</p> <ol> <li> <p>Use remote GPU server: <pre><code>ebk config set llm.host gpu-server.local\n</code></pre></p> </li> <li> <p>Use smaller model: <pre><code>ebk config set llm.model llama3.2:1b\n</code></pre></p> </li> <li> <p>Reduce text sample size: <pre><code>ebk enrich ~/library --text-sample-size 2000\n</code></pre></p> </li> <li> <p>Process in batches: <pre><code>ebk enrich ~/library --batch-size 5\n</code></pre></p> </li> </ol>"},{"location":"user-guide/llm-features/#out-of-memory","title":"Out of Memory","text":"<p>If Ollama runs out of memory:</p> <ol> <li> <p>Use smaller model: <pre><code>ollama pull llama3.2:1b\nebk config set llm.model llama3.2:1b\n</code></pre></p> </li> <li> <p>Reduce context size: <pre><code>ebk config set llm.max_tokens 500\n</code></pre></p> </li> <li> <p>Close other applications consuming memory</p> </li> <li> <p>Use remote server with more RAM</p> </li> </ol>"},{"location":"user-guide/llm-features/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Start with dry run to preview changes:    <pre><code>ebk enrich ~/library --generate-tags --dry-run\n</code></pre></p> </li> <li> <p>Use appropriate temperature:</p> </li> <li>Tags/categories: 0.3 (consistent)</li> <li> <p>Descriptions: 0.7 (balanced)</p> </li> <li> <p>Process in batches for large libraries:    <pre><code>ebk enrich ~/library --batch-size 10\n</code></pre></p> </li> <li> <p>Use remote GPU for speed:    <pre><code>ebk config set llm.host gpu-server.local\n</code></pre></p> </li> <li> <p>Review and refine generated metadata periodically</p> </li> <li> <p>Backup library before bulk enrichment:    <pre><code>ebk export zip ~/library ~/backup.zip\n</code></pre></p> </li> </ol>"},{"location":"user-guide/llm-features/#examples","title":"Examples","text":""},{"location":"user-guide/llm-features/#enrich-new-import","title":"Enrich New Import","text":"<p>After importing books, enrich their metadata:</p> <pre><code># Import from Calibre\nebk import-calibre ~/Calibre/Library --output ~/my-library\n\n# Generate tags for all books\nebk enrich ~/my-library --generate-tags\n\n# Categorize\nebk enrich ~/my-library --categorize\n</code></pre>"},{"location":"user-guide/llm-features/#improve-existing-metadata","title":"Improve Existing Metadata","text":"<p>Enhance metadata for existing library:</p> <pre><code># Enhance descriptions for books without them\nebk enrich ~/library --enhance-descriptions --filter \"description:null\"\n\n# Add tags to all books\nebk enrich ~/library --generate-tags\n</code></pre>"},{"location":"user-guide/llm-features/#target-specific-books","title":"Target Specific Books","text":"<p>Enrich specific subset of books:</p> <pre><code># Only Python books\nebk enrich ~/library --generate-tags --filter \"subject:Python\"\n\n# Only books from specific author\nebk enrich ~/library --categorize --filter \"author:Knuth\"\n\n# Only recent books\nebk enrich ~/library --enhance-descriptions --filter \"year:2020-\"\n</code></pre>"},{"location":"user-guide/llm-features/#future-features","title":"Future Features","text":"<p>Planned LLM-powered features:</p> <ul> <li>Similarity detection - Find duplicate books with different metadata</li> <li>Summary generation - Create book summaries from content</li> <li>Reading level assessment - Determine appropriate audience</li> <li>Topic extraction - Identify key topics and themes</li> <li>Citation extraction - Extract and link referenced works</li> <li>Question generation - Create study questions</li> <li>Translation - Translate metadata between languages</li> </ul>"},{"location":"user-guide/llm-features/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Guide - Set up LLM provider</li> <li>CLI Reference - Complete command reference</li> <li>Python API - Programmatic access</li> <li>LLM Providers README - Provider details</li> </ul>"},{"location":"user-guide/search/","title":"Search &amp; Query","text":"<p>ebk provides powerful search capabilities with field-specific queries, boolean logic, and full-text search powered by SQLite FTS5.</p>"},{"location":"user-guide/search/#quick-start","title":"Quick Start","text":"<pre><code># Simple full-text search\nebk search \"machine learning\" ~/my-library\n\n# Field-specific search\nebk search \"title:Python rating:&gt;=4\" ~/my-library\n\n# Multiple criteria\nebk search \"author:Knuth format:pdf\" ~/my-library\n</code></pre>"},{"location":"user-guide/search/#advanced-search-syntax","title":"Advanced Search Syntax","text":""},{"location":"user-guide/search/#field-specific-searches","title":"Field-Specific Searches","text":"<p>Search within specific fields using <code>field:value</code> syntax:</p> Field Description Example <code>title:</code> Search in book titles <code>title:Python</code> <code>author:</code> Search by author name <code>author:Knuth</code> <code>tag:</code> or <code>subject:</code> Search subjects/tags <code>tag:programming</code> <code>description:</code> Search in book descriptions <code>description:algorithms</code> <code>text:</code> Search in extracted text <code>text:recursion</code> <code>series:</code> Search by series name <code>series:TAOCP</code> <p>Examples:</p> <pre><code># Books with \"intelligence\" in the title\nebk search \"title:intelligence\" ~/my-library\n\n# Books by Donald Knuth\nebk search \"author:Knuth\" ~/my-library\n\n# Books tagged with \"programming\"\nebk search \"tag:programming\" ~/my-library\n\n# Search book descriptions for \"algorithm\"\nebk search \"description:algorithm\" ~/my-library\n</code></pre>"},{"location":"user-guide/search/#filter-fields","title":"Filter Fields","text":"<p>Apply exact filters using the same syntax:</p> Filter Description Example <code>language:</code> Filter by language code <code>language:en</code> <code>format:</code> Filter by file format <code>format:pdf</code> <code>rating:</code> Filter by rating (with operators) <code>rating:&gt;=4</code> <code>favorite:</code> Filter favorites only <code>favorite:true</code> <code>status:</code> Filter by reading status <code>status:reading</code> <p>Examples:</p> <pre><code># English books only\nebk search \"python language:en\" ~/my-library\n\n# PDF files only\nebk search \"algorithms format:pdf\" ~/my-library\n\n# Books rated 4 stars or higher\nebk search \"title:learning rating:&gt;=4\" ~/my-library\n\n# Favorite books\nebk search \"programming favorite:true\" ~/my-library\n</code></pre>"},{"location":"user-guide/search/#rating-comparisons","title":"Rating Comparisons","text":"<p>The <code>rating:</code> filter supports comparison operators:</p> <pre><code>rating:5           # Exactly 5 stars\nrating:&gt;=4         # 4 stars or higher\nrating:&gt;3          # Greater than 3 stars\nrating:&lt;4          # Less than 4 stars\nrating:3-5         # Between 3 and 5 stars (range)\n</code></pre> <p>Examples:</p> <pre><code># Highly rated Python books\nebk search \"title:Python rating:&gt;=4\" ~/my-library\n\n# Books rated between 3 and 4 stars\nebk search \"rating:3-4\" ~/my-library\n</code></pre>"},{"location":"user-guide/search/#boolean-operators","title":"Boolean Operators","text":"<p>Combine search terms with boolean logic:</p> Operator Behavior Example (space) Implicit AND <code>python programming</code> <code>OR</code> Explicit OR <code>python OR java</code> <code>NOT</code> Exclude term <code>programming NOT java</code> <code>-</code> prefix Exclude (shorthand) <code>programming -java</code> <p>Examples:</p> <pre><code># Books about both Python AND machine learning\nebk search \"python machine learning\" ~/my-library\n\n# Books about Python OR JavaScript\nebk search \"python OR javascript\" ~/my-library\n\n# Programming books excluding Java\nebk search \"programming NOT java\" ~/my-library\n\n# Same as above, using shorthand\nebk search \"programming -java\" ~/my-library\n</code></pre>"},{"location":"user-guide/search/#phrase-searches","title":"Phrase Searches","text":"<p>Use quotes for exact phrase matching:</p> <pre><code># Exact phrase\nebk search '\"machine learning\"' ~/my-library\n\n# Phrase in specific field\nebk search 'title:\"deep learning\"' ~/my-library\n\n# Phrase with filters\nebk search '\"artificial intelligence\" language:en format:pdf' ~/my-library\n</code></pre>"},{"location":"user-guide/search/#combined-queries","title":"Combined Queries","text":"<p>Mix field searches, filters, and boolean logic:</p> <pre><code># Python books, 4+ stars, PDF format\nebk search \"title:Python rating:&gt;=4 format:pdf\" ~/my-library\n\n# Books by Knuth in his TAOCP series\nebk search \"author:Knuth series:TAOCP\" ~/my-library\n\n# Favorite programming books (not Java)\nebk search \"tag:programming favorite:true NOT java\" ~/my-library\n\n# Machine learning books in English, highly rated\nebk search '\"machine learning\" language:en rating:&gt;=4' ~/my-library\n</code></pre>"},{"location":"user-guide/search/#full-text-search-fts5","title":"Full-Text Search (FTS5)","text":"<p>ebk uses SQLite FTS5 for fast full-text indexing across:</p> <ul> <li>Book titles</li> <li>Descriptions</li> <li>Extracted text from PDFs, EPUBs, and plaintext files</li> </ul> <p>The FTS5 engine provides:</p> <ul> <li>Porter stemming: Searches for \"running\" also match \"run\", \"runs\", etc.</li> <li>Unicode support: Full support for international characters</li> <li>Ranking: Results ordered by relevance</li> <li>Fast performance: Indexed searches even on large libraries</li> </ul>"},{"location":"user-guide/search/#search-in-different-contexts","title":"Search in Different Contexts","text":""},{"location":"user-guide/search/#cli-search","title":"CLI Search","text":"<pre><code># Basic search\nebk search \"query\" ~/my-library\n\n# Limit results\nebk search \"query\" ~/my-library --limit 20\n</code></pre>"},{"location":"user-guide/search/#web-server-search","title":"Web Server Search","text":"<p>The web server (<code>ebk serve</code>) provides advanced search via REST API:</p> <pre><code># Start server\nebk serve ~/my-library\n\n# Search via API\ncurl \"http://localhost:8000/api/search?q=title:Python+rating:&gt;=4\"\n</code></pre> <p>The web UI includes a search bar with the same advanced syntax.</p>"},{"location":"user-guide/search/#python-api","title":"Python API","text":"<pre><code>from ebk.library_db import Library\nfrom pathlib import Path\n\nlib = Library.open(Path(\"~/my-library\"))\n\n# Simple search\nresults = lib.search(\"machine learning\", limit=50)\n\n# Advanced search\nresults = lib.search(\"title:Python rating:&gt;=4 format:pdf\", limit=50)\n\nfor book in results:\n    print(f\"{book.title} by {', '.join(a.name for a in book.authors)}\")\n\nlib.close()\n</code></pre>"},{"location":"user-guide/search/#search-limitations","title":"Search Limitations","text":"<p>HTML Export: The exported HTML files use client-side JavaScript filtering, not the advanced search parser. For advanced search features, use:</p> <ul> <li>CLI: <code>ebk search</code></li> <li>Web server: <code>ebk serve</code></li> <li>Python API: <code>Library.search()</code></li> </ul>"},{"location":"user-guide/search/#tips-and-best-practices","title":"Tips and Best Practices","text":"<ol> <li>Start broad, refine: Begin with simple queries, then add filters</li> <li>Use field searches: More precise than full-text when you know what field to search</li> <li>Combine filters: Multiple filters are ANDed together by default</li> <li>Quote phrases: Always quote multi-word phrases for exact matching</li> <li>Test queries: Use <code>--limit 5</code> when testing complex queries</li> </ol>"},{"location":"user-guide/search/#see-also","title":"See Also","text":"<ul> <li>CLI Reference - Full command documentation</li> <li>Server - Web server search API</li> </ul>"},{"location":"user-guide/server/","title":"Web Server","text":"<p>ebk includes a FastAPI-based web server that provides a modern web interface for browsing and managing your ebook library.</p>"},{"location":"user-guide/server/#quick-start","title":"Quick Start","text":""},{"location":"user-guide/server/#basic-usage","title":"Basic Usage","text":"<p>Start the server with default settings:</p> <pre><code>ebk serve ~/my-library\n</code></pre> <p>The server will start at <code>http://localhost:8000</code> (or the configured host/port).</p>"},{"location":"user-guide/server/#custom-host-and-port","title":"Custom Host and Port","text":"<pre><code># Listen on specific port\nebk serve ~/library --port 8080\n\n# Localhost only (more secure)\nebk serve ~/library --host 127.0.0.1 --port 8000\n\n# Listen on all interfaces (network access)\nebk serve ~/library --host 0.0.0.0 --port 8000\n</code></pre>"},{"location":"user-guide/server/#auto-open-browser","title":"Auto-Open Browser","text":"<pre><code># Open browser automatically\nebk serve ~/library --auto-open\n\n# Or configure as default\nebk config set server.auto_open_browser true\nebk serve ~/library\n</code></pre>"},{"location":"user-guide/server/#configuration","title":"Configuration","text":"<p>Configure server defaults in <code>~/.config/ebk/config.json</code>:</p> <pre><code># Set default port\nebk config set server.port 8080\n\n# Set default host\nebk config set server.host 0.0.0.0\n\n# Enable auto-open\nebk config set server.auto_open_browser true\n\n# Set page size\nebk config set server.page_size 50\n</code></pre> <p>View current configuration:</p> <pre><code>ebk config show --section server\n</code></pre>"},{"location":"user-guide/server/#web-interface-features","title":"Web Interface Features","text":""},{"location":"user-guide/server/#book-browsing","title":"Book Browsing","text":"<p>The web interface provides:</p> <ul> <li>Grid view with book covers</li> <li>List view with detailed information</li> <li>Pagination for large libraries</li> <li>Sorting by title, author, date, rating</li> <li>Filtering by author, language, format, rating, tags</li> </ul>"},{"location":"user-guide/server/#navigation","title":"Navigation","text":"<p>Use URL parameters for direct navigation:</p> <pre><code># Pagination\nhttp://localhost:8000/?page=2\n\n# Filtering\nhttp://localhost:8000/?author=Knuth\nhttp://localhost:8000/?language=en\nhttp://localhost:8000/?format=pdf\n\n# Sorting\nhttp://localhost:8000/?sort_by=title\nhttp://localhost:8000/?sort_by=date&amp;sort_order=desc\n\n# Combine filters\nhttp://localhost:8000/?author=Knuth&amp;language=en&amp;sort_by=title\n</code></pre>"},{"location":"user-guide/server/#search","title":"Search","text":"<p>Full-text search across title, author, and description:</p> <pre><code>http://localhost:8000/search?q=python+programming\n</code></pre>"},{"location":"user-guide/server/#book-details","title":"Book Details","text":"<p>Click on any book to view:</p> <ul> <li>Complete metadata</li> <li>All available formats</li> <li>Cover image</li> <li>Description</li> <li>Authors and subjects</li> <li>Reading status and rating</li> <li>Personal tags and notes</li> </ul>"},{"location":"user-guide/server/#file-access","title":"File Access","text":"<p>Click on format badges to:</p> <ul> <li>Open files directly in browser (PDF)</li> <li>Download files (EPUB, MOBI, etc.)</li> <li>View cover in full size</li> </ul>"},{"location":"user-guide/server/#rest-api","title":"REST API","text":"<p>The server provides a REST API for programmatic access.</p>"},{"location":"user-guide/server/#endpoints","title":"Endpoints","text":""},{"location":"user-guide/server/#list-books","title":"List Books","text":"<pre><code># Get all books (paginated)\ncurl http://localhost:8000/api/books\n\n# With filters\ncurl \"http://localhost:8000/api/books?author=Knuth&amp;language=en\"\n\n# With pagination\ncurl \"http://localhost:8000/api/books?page=2&amp;limit=50\"\n</code></pre> <p>Response:</p> <pre><code>{\n  \"books\": [\n    {\n      \"id\": 1,\n      \"title\": \"The Art of Computer Programming, Vol. 1\",\n      \"authors\": [\"Donald E. Knuth\"],\n      \"language\": \"en\",\n      \"publisher\": \"Addison-Wesley\",\n      \"publication_date\": \"1997-07-23\",\n      \"subjects\": [\"Computer Science\", \"Algorithms\"],\n      \"files\": [\n        {\"format\": \"pdf\", \"size\": 15728640, \"path\": \"...\"}\n      ],\n      \"rating\": 5.0,\n      \"favorite\": true,\n      \"reading_status\": \"read\",\n      \"tags\": [\"must-read\", \"reference\"]\n    }\n  ],\n  \"total\": 150,\n  \"page\": 1,\n  \"limit\": 50\n}\n</code></pre>"},{"location":"user-guide/server/#get-book-details","title":"Get Book Details","text":"<pre><code># Get specific book\ncurl http://localhost:8000/api/books/42\n</code></pre> <p>Response:</p> <pre><code>{\n  \"id\": 42,\n  \"title\": \"Introduction to Algorithms\",\n  \"subtitle\": \"Third Edition\",\n  \"authors\": [\"Cormen\", \"Leiserson\", \"Rivest\", \"Stein\"],\n  \"language\": \"en\",\n  \"publisher\": \"MIT Press\",\n  \"publication_date\": \"2009-07-31\",\n  \"series\": null,\n  \"series_index\": null,\n  \"description\": \"Comprehensive algorithms textbook...\",\n  \"subjects\": [\"Algorithms\", \"Computer Science\", \"Data Structures\"],\n  \"files\": [\n    {\"format\": \"pdf\", \"size\": 20971520, \"path\": \"files/ab/abc123.pdf\"},\n    {\"format\": \"epub\", \"size\": 10485760, \"path\": \"files/cd/cde456.epub\"}\n  ],\n  \"rating\": 5.0,\n  \"favorite\": true,\n  \"reading_status\": \"reading\",\n  \"tags\": [\"textbook\", \"algorithms\", \"must-read\"],\n  \"cover_path\": \"covers/ab/abc123.jpg\"\n}\n</code></pre>"},{"location":"user-guide/server/#search-books","title":"Search Books","text":"<pre><code># Full-text search\ncurl \"http://localhost:8000/api/search?q=machine+learning\"\n</code></pre>"},{"location":"user-guide/server/#update-book","title":"Update Book","text":"<pre><code># Update book metadata\ncurl -X PATCH http://localhost:8000/api/books/42 \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"rating\": 5,\n    \"favorite\": true,\n    \"reading_status\": \"read\",\n    \"tags\": [\"must-read\", \"reference\"]\n  }'\n</code></pre>"},{"location":"user-guide/server/#upload-book","title":"Upload Book","text":"<pre><code># Import new book\ncurl -X POST http://localhost:8000/api/books \\\n  -F \"file=@book.pdf\" \\\n  -F \"title=My Book\" \\\n  -F \"authors=Author Name\"\n</code></pre>"},{"location":"user-guide/server/#get-statistics","title":"Get Statistics","text":"<pre><code># Library statistics\ncurl http://localhost:8000/api/stats\n</code></pre> <p>Response:</p> <pre><code>{\n  \"total_books\": 250,\n  \"total_authors\": 180,\n  \"total_subjects\": 45,\n  \"total_files\": 320,\n  \"total_size_mb\": 15360.5,\n  \"languages\": [\"en\", \"de\", \"fr\"],\n  \"formats\": [\"pdf\", \"epub\", \"mobi\"]\n}\n</code></pre>"},{"location":"user-guide/server/#api-authentication","title":"API Authentication","text":"<p>Currently the API is open (no authentication). For production use, consider:</p> <ol> <li>Reverse proxy with authentication (nginx, Apache)</li> <li>VPN for secure access</li> <li>Firewall rules to restrict access</li> </ol> <p>Future versions will support API keys and OAuth.</p>"},{"location":"user-guide/server/#network-access","title":"Network Access","text":""},{"location":"user-guide/server/#local-access-only","title":"Local Access Only","text":"<p>For security, bind to localhost:</p> <pre><code>ebk serve ~/library --host 127.0.0.1\n</code></pre> <p>Access from same machine only: <code>http://localhost:8000</code></p>"},{"location":"user-guide/server/#lan-access","title":"LAN Access","text":"<p>To access from other devices on your network:</p> <pre><code>ebk serve ~/library --host 0.0.0.0 --port 8000\n</code></pre> <p>Find your IP address:</p> <pre><code># Linux/Mac\nifconfig | grep inet\n\n# Windows\nipconfig\n</code></pre> <p>Access from other devices: <code>http://your-ip:8000</code></p>"},{"location":"user-guide/server/#public-access-not-recommended","title":"Public Access (Not Recommended)","text":"<p>For internet access, use a reverse proxy with authentication:</p> <pre><code># nginx configuration\nserver {\n    listen 80;\n    server_name books.example.com;\n\n    location / {\n        proxy_pass http://localhost:8000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n\n        # Basic authentication\n        auth_basic \"eBook Library\";\n        auth_basic_user_file /etc/nginx/.htpasswd;\n    }\n}\n</code></pre>"},{"location":"user-guide/server/#production-deployment","title":"Production Deployment","text":""},{"location":"user-guide/server/#using-systemd-linux","title":"Using systemd (Linux)","text":"<p>Create service file: <code>/etc/systemd/system/ebk-server.service</code></p> <pre><code>[Unit]\nDescription=ebk Web Server\nAfter=network.target\n\n[Service]\nType=simple\nUser=your-username\nWorkingDirectory=/home/your-username\nExecStart=/home/your-username/.local/bin/ebk serve /home/your-username/library --host 0.0.0.0 --port 8000\nRestart=on-failure\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Enable and start:</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl enable ebk-server\nsudo systemctl start ebk-server\nsudo systemctl status ebk-server\n</code></pre>"},{"location":"user-guide/server/#using-docker","title":"Using Docker","text":"<p>Create <code>Dockerfile</code>:</p> <pre><code>FROM python:3.11-slim\n\nWORKDIR /app\n\n# Install ebk\nRUN pip install ebk\n\n# Expose port\nEXPOSE 8000\n\n# Mount library as volume\nVOLUME [\"/library\"]\n\n# Start server\nCMD [\"ebk\", \"serve\", \"/library\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]\n</code></pre> <p>Build and run:</p> <pre><code># Build image\ndocker build -t ebk-server .\n\n# Run container\ndocker run -d \\\n  -p 8000:8000 \\\n  -v ~/my-library:/library \\\n  --name ebk \\\n  ebk-server\n\n# View logs\ndocker logs -f ebk\n</code></pre>"},{"location":"user-guide/server/#using-docker-compose","title":"Using docker-compose","text":"<p>Create <code>docker-compose.yml</code>:</p> <pre><code>version: '3.8'\n\nservices:\n  ebk:\n    image: ebk-server\n    build: .\n    ports:\n      - \"8000:8000\"\n    volumes:\n      - ~/my-library:/library:ro\n    restart: unless-stopped\n    environment:\n      - EBK_HOST=0.0.0.0\n      - EBK_PORT=8000\n</code></pre> <p>Start:</p> <pre><code>docker-compose up -d\n</code></pre>"},{"location":"user-guide/server/#security-considerations","title":"Security Considerations","text":""},{"location":"user-guide/server/#file-system-access","title":"File System Access","text":"<p>The web server requires:</p> <ul> <li>Read access to library files</li> <li>Write access for uploads and metadata updates</li> <li>Execute access for opening files</li> </ul> <p>Set appropriate permissions:</p> <pre><code># Set library ownership\nchown -R your-username:your-username ~/library\n\n# Set secure permissions\nchmod -R 755 ~/library/files\nchmod 644 ~/library/library.db\n</code></pre>"},{"location":"user-guide/server/#network-security","title":"Network Security","text":"<ol> <li> <p>Firewall: Only allow access from trusted networks    <pre><code># Allow from local network only\nsudo ufw allow from 192.168.1.0/24 to any port 8000\n</code></pre></p> </li> <li> <p>HTTPS: Use reverse proxy with SSL/TLS for production</p> </li> <li> <p>Authentication: Implement via reverse proxy or VPN</p> </li> </ol>"},{"location":"user-guide/server/#file-uploads","title":"File Uploads","text":"<p>If allowing uploads:</p> <ol> <li>Validate file types (only ebooks)</li> <li>Limit file size (prevent DoS)</li> <li>Scan for malware if accepting external files</li> <li>Use dedicated upload directory with restricted permissions</li> </ol>"},{"location":"user-guide/server/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/server/#port-already-in-use","title":"Port Already in Use","text":"<p>If port 8000 is already used:</p> <pre><code># Check what's using the port\nlsof -i :8000\n\n# Use different port\nebk serve ~/library --port 8080\n</code></pre>"},{"location":"user-guide/server/#permission-denied","title":"Permission Denied","text":"<p>If server can't read library:</p> <pre><code># Check permissions\nls -la ~/library\n\n# Fix permissions\nchmod -R 755 ~/library\n</code></pre>"},{"location":"user-guide/server/#cant-access-from-network","title":"Can't Access from Network","text":"<p>If other devices can't connect:</p> <ol> <li> <p>Check firewall:    <pre><code>sudo ufw status\nsudo ufw allow 8000\n</code></pre></p> </li> <li> <p>Verify host binding:    <pre><code># Must be 0.0.0.0 for network access\nebk serve ~/library --host 0.0.0.0\n</code></pre></p> </li> <li> <p>Check network:    <pre><code># Test from other device\nping your-ip\ntelnet your-ip 8000\n</code></pre></p> </li> </ol>"},{"location":"user-guide/server/#slow-performance","title":"Slow Performance","text":"<p>If web interface is slow:</p> <ol> <li> <p>Check database size:    <pre><code>du -h ~/library/library.db\n</code></pre></p> </li> <li> <p>Optimize database:    <pre><code>sqlite3 ~/library/library.db \"VACUUM;\"\n</code></pre></p> </li> <li> <p>Reduce page size:    <pre><code>ebk config set server.page_size 20\n</code></pre></p> </li> <li> <p>Generate thumbnails for faster loading:    <pre><code>ebk generate-thumbnails ~/library\n</code></pre></p> </li> </ol>"},{"location":"user-guide/server/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"user-guide/server/#custom-static-files","title":"Custom Static Files","text":"<p>Serve additional static files:</p> <pre><code>from fastapi.staticfiles import StaticFiles\nfrom ebk.server import app\n\n# Mount custom static directory\napp.mount(\"/static\", StaticFiles(directory=\"/path/to/static\"), name=\"static\")\n</code></pre>"},{"location":"user-guide/server/#custom-templates","title":"Custom Templates","text":"<p>Override default templates:</p> <pre><code>from fastapi.templating import Jinja2Templates\n\ntemplates = Jinja2Templates(directory=\"/path/to/templates\")\n</code></pre>"},{"location":"user-guide/server/#cors-configuration","title":"CORS Configuration","text":"<p>Enable CORS for API access from web apps:</p> <pre><code>from fastapi.middleware.cors import CORSMiddleware\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"http://localhost:3000\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n</code></pre>"},{"location":"user-guide/server/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Guide - Configure server defaults</li> <li>CLI Reference - All server options</li> <li>Python API - Programmatic server control</li> <li>Python API Documentation - Complete API reference</li> </ul>"}]}